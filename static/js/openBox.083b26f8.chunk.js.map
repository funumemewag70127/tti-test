{"version":3,"sources":["common/components/layouts/HistoryButton.tsx","common/components/layouts/QuitGameButton.tsx","common/components/popups/PopupRenderer.tsx","common/components/popups/PopupManger.tsx","common/components/layouts/GameLayout.tsx","common/components/HistoryListPopup.tsx","common/components/MoneySelector.tsx","common/components/Scene.tsx","common/components/index.ts","common/components/PlayerInfo.tsx","typings/openBox/index.ts","openBox/core/openBoxConstants.ts","lang/locales/en_US.ts","lang/getLang.ts","lang/locales/zh_CN.ts","lang/index.ts","common/utils/compose.ts","common/utils/NavigatorEvents.ts","common/utils/navigatorHelper.ts","lang/localeHelper.ts","common/utils/EventEmitter.ts","openBox/OpenBoxGame.tsx","common/styles/images/beijingtu.png","common/components/AuthForm.tsx","apis/openbox/getOpenBoxAPI.ts","common/components/viewPort/ViewPortSizeProvider.tsx","openBox/statics/sounds/oh_no.mp3","openBox/statics/sounds/add-score.mp3","openBox/statics/sounds/result.wav","openBox/components/GameResultPopup.tsx","openBox/core/functions/getOpenBoxMoneyList.ts","openBox/stores/HistoryStore.ts","openBox/eventBus/openBoxEvents.ts","openBox/stores/GamePlayerStore.ts","openBox/stores/index.ts","openBox/components/Box.tsx","openBox/components/BoxGrid.tsx","openBox/components/BoxGameDesk.tsx","common/components/viewPort/getElStyle.ts","openBox/core/gameHelper.ts","common/components/viewPort/viewPortSizeHelper.tsx","common/components/popups/Popup.tsx","common/components/Table.tsx"],"names":["HistoryButton","_ref","onShowHistory","buttonSize","useVPStyle","paddingTop","fontSize","width","height","react_default","a","createElement","className","onClick","type","style","React","memo","QuitGameButtonPure","onQuitPlayer","onQuitGame","isPlayerActive","defaultProps","QuitGameButton","inject","_ref2","gameUIStore","scene","GameUIScene","gamePlayer","PopupRenderer","_ref3","name","isActive","visiblePopup","children","PopupManagerContext","createContext","PopupManager","_ref$popups","popups","_usePopupManager","popupsList","_useState","useState","_useState2","Object","slicedToArray","setPopups","showPopup","popup","concat","toConsumableArray","closePopup","filter","p","usePopupManager","popupList","Provider","value","react","map","renderer","key","GameLayout","_useContext","useContext","ViewPortSizeContext","adjustedHeight","applicationSize","adjustedWidth","gameContentStyle","src","BackgroundUrl","alt","HistoryListPopup","historyStore","displayList","onPlayGame","tHeader","renderListItem","useCallback","item","id","issueNo","money","moment","betTime","format","listContent","Popup","title","Table","tHead","bodyClassName","MoneySelector","moneyList","onSelect","text","Scene","__webpack_require__","d","__webpack_exports__","PlayerInfo","compose","module","imageIndex","_ref$isActive","score","pos","D_workspace_web3game_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","isInPosition","setIsInPosition","useEffect","userImageSize","userScoreSize","top","left","normalPosition","positionType","PositionType","right","topBase","leftBase","bottom","getPlayerPosition","scoreInfo","react__WEBPACK_IMPORTED_MODULE_1___default","Player","posed","div","enter","active","orgPosition","newPos","_","clone","getActivePosition","inActive","react_pose__WEBPACK_IMPORTED_MODULE_4__","pose","OpenBoxTimeSpan","PrepareBoxTimeSpan","OpeningDuration","BoxStatus","closed","opened","opening","en_US","APP_TITLE","HOME","SHOPS","MY","GAME","GAME_IS_NOT_READY","RANK","LANGUAGE_SETTING","BACK","TT_BALANCE","TOKEN_BALANCE","BUY_NOW","OTHER","HOME_PAGE","ASSET_MANAGEMENT","RECEIVE","TRANSFER","ANNOUNCEMENT","BALANCE","TOTAL_EARNINGS","TRANSFER_ACCOUNT","TRANSFER_FROM","TRANSFER_TO","TRANSFER_AMOUNT","PRODUCT_NAME_0","PRODUCT_NAME_1","PRODUCT_NAME_2","PRODUCT_NAME_3","PRODUCT_CTC_VALUE","PRODUCT_BENEFIT","PRODUCT_PURCHASE_LIMITATION","PRODUCT_USE_TIMES","PRODUCT_IS_ALLOW_PURCHASE","PRODUCT_REMAIN_USE_TIMES","PRODUCT_LATEST_GAIN","PRODUCT_VALUE","PRODUCT_EARNING","PRODUCT_TODAY_EARNING","PRODUCT_TOTAL_EARNING","INVITATION","ABOUT_US","ABOUT_US_CONTENT","SYSTEM_ANNOUNCEMENT","MY_EARNING","TRADING_LOG","TODAY_TOTAL_IN_COME","THIS_QUOTER_AVAILABLE_BONUS","AVAILABLE_TIMES","EARNING_TIMES","LATEST_GAIN","STATIC_PROFIT_OF_ONE_TIME","STATIC_PROFIT_TODAY","RELEASE_SCROLL","RENEW_SCROLL","TASK","MY_INVITOR","MY_INVITATION_CODE","MY_GROUP","SET_INVITOR","QUARTER","AVAILABLE_QUARTER_REWARD","STRAIT_REFERER_RANK","GAME_PLAY_RANK","MY_PERFORMANCE","RANK_ACCOUNT","RANK_AMOUNT","GAIN","MY_TASK","MY_TASK_TITLE","OPEN_BOX_PAGE","OPEN_BOX","OPEN_BOX_MONEY_TEXT_1","OPEN_BOX_MONEY_TEXT_2","OPEN_BOX_MONEY_TEXT_3","OPEN_BOX_MONEY_TEXT_4","OPEN_BOX_MONEY_TEXT_5","WEB3","NO_WEB3_PROVIDER","WRONG_NETWORK","getLang","Proxy","get","obj","prop","I18n","t","fallbacks","translations","en","zh","setLocale","getLocaleFromLocalStorage","lodash__WEBPACK_IMPORTED_MODULE_0__","lodash__WEBPACK_IMPORTED_MODULE_0___default","n","_len","arguments","length","hocs","Array","_key","C","reverse","fns","f","reduce","g","EventKeys","back","push","NavigatorEvents","EventEmitter","historyStack","HashSplitter","pushHash","hash","currentHash","document","location","pushPage","_x","_x2","_pushPage","apply","this","_callee","navigator","router","options","routerName","_args","regenerator_default","wrap","_context","prev","next","undefined","stop","popPage","window","history","addEventListener","event","newURL","oldURL","componentName","replace","emit","emitBack","last","pop","popPageInner","replaceState","getLocaleList","i18n_js__WEBPACK_IMPORTED_MODULE_0__","i18n_js__WEBPACK_IMPORTED_MODULE_0___default","LocaleKey","locale","localStorage","setItem","getItem","language","Collection","collection","_this$collection","forEach","fn","_EventEmitterBase","eventKeys","_this","D_workspace_web3game_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__","D_workspace_web3game_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__","D_workspace_web3game_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__","call","removeEventListeners","D_workspace_web3game_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","setMaxListeners","D_workspace_web3game_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__","D_workspace_web3game_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_6__","eventName","_this2","D_workspace_web3game_node_modules_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_3__","prototype","removeFn","removeListener","o","dispose","on","_collection$getCollec","createCollection","getCollection","removeAll","EventEmitterBase","OpenBoxStores","D_workspace_web3game_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__","stores","commonStores","gamePlayerStore","accountStore","setVisiblePopup","PopupNames","betEvent","D_workspace_web3game_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","D_workspace_web3game_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","mark","openBoxAPI","gameRecord","getOpenBoxAPI","sent","loadGame","none","setScene","startGame","onGameEnd","gameResult","quit","moneySelector","onQuitGameResult","onSubmitAuth","params","_callee2","submitGame","_context2","getCommonAPI","betType","nums","amounts","betAddress","t0","alert","onSelectMoney","authForm","prepareRecords","records","currentUserId","record","random","OpenBoxGame","_callee3","_ref5","getHistoryList","getBetAddress","list","_context3","setDisplayList","account","setBetAddress","react__WEBPACK_IMPORTED_MODULE_3___default","_web3game_common_components__WEBPACK_IMPORTED_MODULE_7__","_web3game_common_components_AuthForm__WEBPACK_IMPORTED_MODULE_11__","onSubmit","_components_GameResultPopup__WEBPACK_IMPORTED_MODULE_18__","onQuit","react_onsenui__WEBPACK_IMPORTED_MODULE_4__","_web3game_common_components_viewPort_ViewPortSizeProvider__WEBPACK_IMPORTED_MODULE_15__","perfectHeight","perfectWidth","preferMaxWidth","mobx_react__WEBPACK_IMPORTED_MODULE_6__","assign","getOpenBoxMoneyList","_components_BoxGameDesk__WEBPACK_IMPORTED_MODULE_19__","exports","AuthForm","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","mobx_react__WEBPACK_IMPORTED_MODULE_1__","_popups_Popup__WEBPACK_IMPORTED_MODULE_2__","popupData","ttBalance","tokenBalance","gas","_ref$money","handleSubmit","marginTop","_getOpenBoxAPI","isUsingMockAPI","abrupt","e","then","bind","m","default","Promise","all","ViewPortSizeProvider","_ref$preferMode","preferMode","PreferMode","_ref$preferMaxWidth","preferMaxHeight","getWinSize","D_workspace_web3game_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__","_useState2$","winHeight","winWidth","setWinSize","staticSizeInfo","adjustedSizeInfo","getAdjustedSizeInfo","sizeInfo","extend","react__WEBPACK_IMPORTED_MODULE_2___default","GameResultPopup","_web3game_common_components_popups_Popup__WEBPACK_IMPORTED_MODULE_2__","_web3game_common_components_Table__WEBPACK_IMPORTED_MODULE_3__","_web3game_common_components__WEBPACK_IMPORTED_MODULE_4__","_core_gameHelper__WEBPACK_IMPORTED_MODULE_5__","toNumber","num","web3","heroList","getSortedHeroList","sort","b","comparedTo","hero","index","slice","fromWei","gain","_web3game_lang__WEBPACK_IMPORTED_MODULE_0__","_class","HistoryStore","classCallCheck","initializerDefineProperty","_descriptor","createClass","applyDecoratedDescriptor","observable","configurable","enumerable","writable","initializer","action","getOwnPropertyDescriptor","ON_GAME_NOT_READY","openBoxEvents","_EventEmitter","GlobalEvent","_getPrototypeOf2","args","possibleConstructorReturn","getPrototypeOf","onGameReadyStatusChange","triggerGameReadyStatus","isReady","inherits","GamePlayerStore_class","GamePlayerStore","start","end","pause","resume","beginOpenBox","finishOpenBox","GamePlayerStore_descriptor","assertThisInitialized","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","playerTimeout","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","resetPlayer","play","isPaused","resolve","playBoxByIndex","isEnd","playSound","Sounds","result","clearTimeout","openIndex","_this3","openingBox","sortedBoxes","getSortedBoxes","waitTimeout","box","finishedOpenIndex","heroPos","playerScores","boomedHeroId","heroId","boom","addScore","oldScore","actionFn","_this4","timeout","setTimeout","fasterTimes","clearPlayerTimeout","_this5","_this6","AnimatedClassNames","defineProperty","Box","_dec","observer","_temp","_class2","_React$Component","isBoxOpened","_this$props","props","_this$props2","boxIndex","isOpened","isOpening","status","_this$props3","boxCover","isBoomer","getStatus","boomClassName","scoreClassName","boxCoverClassName","boxClassName","boxWrapperClassName","boxSize","getAnimatedClassByStatus","Component","ColumnNum","range4","range","BoxGrid","tableSize","rowIndex","colIndex","columnIndex","boxInfo","Box_Box","renderColumn","BoxGameDesk","_ref$openIndex","Fragment","components","lodash__WEBPACK_IMPORTED_MODULE_1__","lodash__WEBPACK_IMPORTED_MODULE_1___default","_viewPortSizeHelper__WEBPACK_IMPORTED_MODULE_2__","styles","finalRatio","val","isNumber","howler__WEBPACK_IMPORTED_MODULE_1__","_web3game_typings_openBox__WEBPACK_IMPORTED_MODULE_2__","require","soundSrc","Howl","playerAddrs","_gameRecord$playerAwa","playerAwards","currentUserIdIndex","indexOf","imageIndexsMap","userIds","getRandomValue","im","userId","imageIndexMap","userImageIndexCache","prevImageIndexList","values","getRandomValueNotIn","getRandomUsersImageIndex","resortedUserIds","posDiff","i","startMoveIndex","cloneDeep","genOtherRecord","sortedIndex","isCurrentUser","getCurrentRecord","scores","sequencs","sortedHeroList","heroInfo","find","heroIndex","initialSizeInfo","widthHeightRatio","innerHeight","innerWidth","_ref$perfectHeight","_ref$perfectWidth","_preferMaxHeight","_preferMaxWidth","_ref$winWidth","resizeRatioByWidth","Modal","y","opacity","delay","transition","stiffness","damping","duration","exit","Backdrop","debounce","_ref$className","isVisible","setIsVisible","react_pose__WEBPACK_IMPORTED_MODULE_3__","onTouchEnd","onKeyDown","role","tabIndex","aria-label","_ref$bodyClassName"],"mappings":"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","file":"static/js/openBox.083b26f8.chunk.js","sourcesContent":["import React from 'react';\r\nimport {useVPStyle} from \"../viewPort/getElStyle\";\r\n\r\ntype HistoryButtonProps = {\r\n    onShowHistory: () => void;\r\n};\r\n\r\nexport function HistoryButton(\r\n    {\r\n        onShowHistory,\r\n    }: HistoryButtonProps,\r\n) {\r\n    const buttonSize = useVPStyle({\r\n        paddingTop: 16,\r\n        fontSize: 28,\r\n        width: 280,\r\n        height: 120,\r\n    });\r\n\r\n    return (\r\n        <button\r\n            className=\"gameHistoryButton\"\r\n            onClick={onShowHistory}\r\n            type=\"button\"\r\n            style={buttonSize}\r\n        >\r\n            投注记录\r\n        </button>\r\n    );\r\n}\r\n\r\nexport default React.memo(HistoryButton);\r\n","import React from 'react';\r\nimport {inject} from \"mobx-react\";\r\nimport {GameUIStore} from \"../../stores/GameUIStore\";\r\nimport {GameUIScene} from \"../../utils/constants\";\r\nimport {useVPStyle} from \"../viewPort/getElStyle\";\r\n\r\ntype QuitGameButtonProps = {\r\n    onQuitPlayer?: () => void;\r\n    onQuitGame?: () => void;\r\n    isPlayerActive: boolean;\r\n};\r\n\r\nexport function QuitGameButtonPure(\r\n    {\r\n        onQuitPlayer,\r\n        onQuitGame,\r\n        isPlayerActive,\r\n    }: QuitGameButtonProps,\r\n) {\r\n    const onClick = isPlayerActive ? onQuitPlayer : onQuitGame;\r\n\r\n    if (!onClick) {\r\n        return null;\r\n    }\r\n\r\n    const buttonSize = useVPStyle({\r\n        paddingTop: 16,\r\n        fontSize: 28,\r\n        width: 280,\r\n        height: 120,\r\n    });\r\n\r\n\r\n    return (\r\n        <button\r\n            className=\"gameQuitButton\"\r\n            onClick={onClick}\r\n            type=\"button\"\r\n            style={buttonSize}\r\n        >\r\n            返回\r\n        </button>\r\n    );\r\n}\r\n\r\nQuitGameButtonPure.defaultProps = {\r\n    isPlayerActive: false,\r\n};\r\n\r\ntype QuitGameButtonInjectedProps = {\r\n    gameUIStore?: GameUIStore;\r\n    onQuitGame: () => void;\r\n    onQuitPlayer: () => void;\r\n};\r\n\r\nexport const QuitGameButton = inject(\r\n    (\r\n        { gameUIStore }: QuitGameButtonInjectedProps,\r\n    ) => {\r\n        const isPlayerActive = gameUIStore && gameUIStore.scene === GameUIScene.gamePlayer;\r\n\r\n        return {\r\n            isPlayerActive,\r\n        };\r\n    },\r\n)(QuitGameButtonPure);\r\n","import React from 'react';\r\nimport {inject} from \"mobx-react\";\r\nimport {GameUIStore} from \"../../stores/GameUIStore\";\r\nimport {PopupNames} from \"../../utils/constants\";\r\n\r\ntype PopupPureProps = {\r\n    name: PopupNames;\r\n    isActive?: boolean;\r\n    children: () => React.ReactElement;\r\n};\r\n\r\nexport function PopupRendererPure(\r\n    {\r\n        isActive,\r\n        children,\r\n    }: PopupPureProps,\r\n) {\r\n    return isActive ? children() : null;\r\n}\r\n\r\ntype SceneInjectorStores = { gameUIStore: GameUIStore };\r\n\r\nexport const PopupRenderer = inject(\r\n    ({ gameUIStore }: SceneInjectorStores, { name }) => ({\r\n        isActive: gameUIStore.visiblePopup === name,\r\n    }),\r\n)(PopupRendererPure);\r\n","import React, {Fragment, useState} from 'react';\r\nimport {PopupRenderer} from \"./PopupRenderer\";\r\nimport {PopupElement} from \"..\";\r\nimport {PopupNames} from \"../../utils/constants\";\r\n\r\n\r\nexport type PopupManagerProps = {\r\n    popups?: PopupElement[];\r\n};\r\n\r\nconst PopupManagerContext = React.createContext({});\r\n\r\nfunction usePopupManager(popupsList: PopupElement[]) {\r\n    const [popups, setPopups] = useState(popupsList);\r\n\r\n    return {\r\n        popups,\r\n        showPopup: (popup: PopupElement) => {\r\n            setPopups([\r\n                ...popups,\r\n                popup,\r\n            ]);\r\n        },\r\n        closePopup: (name: PopupNames) => {\r\n            setPopups(popups.filter((p: any) => p.name !== name));\r\n        },\r\n    };\r\n}\r\n\r\nexport function PopupManager({ popups = [] }: PopupManagerProps) {\r\n\r\n    const { showPopup, popups: popupList } = usePopupManager(popups);\r\n\r\n    return (\r\n        <PopupManagerContext.Provider value={{ showPopup }}>\r\n            <Fragment>\r\n                {\r\n                    popupList.map(({ name, renderer }) => (\r\n                        <PopupRenderer key={name} name={name}>\r\n                            {renderer}\r\n                        </PopupRenderer>\r\n                    ))\r\n                }\r\n            </Fragment>\r\n        </PopupManagerContext.Provider>\r\n    );\r\n\r\n}\r\n","import React, {useContext} from 'react';\r\nimport {HistoryButton} from \"./HistoryButton\";\r\nimport {PopupNames} from \"../../utils/constants\";\r\nimport {QuitGameButton} from \"./QuitGameButton\";\r\nimport {PopupManager} from \"../popups/PopupManger\";\r\nimport {ViewPortSizeContext} from \"../viewPort/viewPortSizeHelper\";\r\n\r\nimport BackgroundUrl from '../../styles/images/beijingtu.png';\r\nimport {useVPStyle} from \"../viewPort/getElStyle\";\r\n\r\nexport type PopupElement = { name: PopupNames; renderer: () => React.ReactElement }\r\n\r\nexport type GameLayoutProps = {\r\n    children?: React.ReactElement | React.ReactElement[];\r\n    onShowHistory: () => void;\r\n    onQuitGame?: () => void;\r\n    onQuitPlayer?: () => void;\r\n    popups?: PopupElement[];\r\n};\r\n\r\nexport function GameLayout(\r\n    {\r\n        children,\r\n        onShowHistory,\r\n        popups = [],\r\n        onQuitGame,\r\n        onQuitPlayer,\r\n    }: GameLayoutProps,\r\n) {\r\n    const {\r\n        adjustedHeight,\r\n        adjustedWidth,\r\n    } = useContext(ViewPortSizeContext);\r\n\r\n    const applicationSize = {\r\n        width: adjustedWidth,\r\n        height: adjustedHeight,\r\n    };\r\n\r\n    const gameContentStyle = useVPStyle({\r\n        paddingTop: 460,\r\n    });\r\n\r\n    return (\r\n        <div className=\"gameApplication\" style={applicationSize}>\r\n            <img src={BackgroundUrl} alt=\"background\" className=\"backgroundImage\" />\r\n            <HistoryButton onShowHistory={onShowHistory} />\r\n            <QuitGameButton\r\n                onQuitGame={onQuitGame}\r\n                onQuitPlayer={onQuitPlayer}\r\n            />\r\n            <div className=\"gameDesktop\">\r\n                <div className=\"gameDesktopContent\" style={gameContentStyle}>\r\n                    {children}\r\n                </div>\r\n            </div>\r\n\r\n            <PopupManager popups={popups} />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default React.memo(GameLayout);\r\n","import React from 'react';\r\nimport {inject} from \"mobx-react\";\r\nimport moment from \"moment\";\r\nimport { BetEvent } from '@web3game/typings/openBox';\r\nimport {Popup} from \"./popups/Popup\";\r\nimport {HistoryStore} from \"../../openBox/stores/HistoryStore\";\r\nimport {Table} from \"./Table\";\r\n\r\n\r\ntype HistoryListProps = {\r\n    onPlayGame: (betEvent: BetEvent) => void;\r\n    displayList?: [];\r\n};\r\n\r\nexport function HistoryListPure(\r\n    {\r\n        onPlayGame,\r\n        displayList,\r\n    }: HistoryListProps,\r\n) {\r\n    const tHeader = (\r\n        <tr>\r\n            <th className=\"historyNo\">期号</th>\r\n            <th>金额</th>\r\n            <th className=\"historyDate\">日期</th>\r\n            <th className=\"historyAction\">{\" \"}</th>\r\n        </tr>\r\n    );\r\n\r\n    const renderListItem = React.useCallback(\r\n        (item: any) => (\r\n            <tr key={item.id}>\r\n                <td className=\"historyNo\">{item.issueNo}</td>\r\n                <td>{item.money}</td>\r\n                <td className=\"historyDate\">{moment(item.betTime).format('MM/DD HH:mm')}</td>\r\n                <td className=\"historyAction\">\r\n                    <button\r\n                        className=\"historyActionButton\"\r\n                        onClick={() => onPlayGame(item)}\r\n                        type=\"button\"\r\n                    />\r\n                </td>\r\n            </tr>\r\n        ),\r\n        [],\r\n    );\r\n\r\n    const listContent = displayList ? displayList.map(renderListItem) : null;\r\n\r\n    return (\r\n        <Popup title=\"投注记录\">\r\n            <Table\r\n                tHead={tHeader}\r\n                className=\"historyList\"\r\n                bodyClassName=\"purchaseListTbody\"\r\n            >\r\n                {listContent}\r\n            </Table>\r\n        </Popup>\r\n    );\r\n}\r\n\r\ntype BoxGridInjectedStores = {\r\n    historyStore?: HistoryStore;\r\n};\r\n\r\nexport const HistoryListPopup = inject(\r\n    ({ historyStore }: BoxGridInjectedStores) => ({\r\n        displayList: historyStore ? historyStore.displayList : [],\r\n    }),\r\n)(HistoryListPure);\r\n","import React from 'react';\r\nimport {useVPStyle} from \"./viewPort/getElStyle\";\r\n\r\ntype MoneySelectorPureProps = {\r\n    moneyList: any[];\r\n    onSelect: (money: number) => void;\r\n};\r\n\r\nexport function MoneySelectorPure(\r\n    {\r\n        moneyList,\r\n        onSelect,\r\n    }: MoneySelectorPureProps,\r\n) {\r\n    const buttonSize = useVPStyle({\r\n        width: 180,\r\n        height: 90,\r\n        fontSize: 24,\r\n    });\r\n\r\n    return (\r\n        <div className=\"moneySelector\">\r\n            {moneyList.map(({ money, text }) => (\r\n                <div key={money}>\r\n                    <button\r\n                        type=\"button\"\r\n                        className={`moneySelectorButton moneySelectorButton_${money}`}\r\n                        style={buttonSize}\r\n                        onClick={() => onSelect(money)}\r\n                    >\r\n                        {text}\r\n                    </button>\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport const MoneySelector = React.memo(MoneySelectorPure);\r\n","import React from 'react';\r\nimport {inject} from \"mobx-react\";\r\nimport {GameUIStore} from \"../stores/GameUIStore\";\r\nimport {GameUIScene} from \"../utils/constants\";\r\n\r\ntype ScenePureProps = {\r\n    name: GameUIScene;\r\n    isActive?: boolean;\r\n    children: () => React.ReactElement;\r\n};\r\n\r\nexport function ScenePure(\r\n    {\r\n        isActive,\r\n        children,\r\n    }: ScenePureProps,\r\n) {\r\n    if (!isActive) {\r\n        return null;\r\n    }\r\n\r\n    return children();\r\n}\r\n\r\ntype SceneInjectorStores = { gameUIStore: GameUIStore };\r\n\r\nexport const Scene = inject(\r\n    ({ gameUIStore }: SceneInjectorStores, { name }) => ({\r\n        isActive: gameUIStore.scene === name,\r\n    }),\r\n)(ScenePure);\r\n","export * from './layouts/GameLayout';\r\nexport * from './layouts/HistoryButton';\r\nexport * from './HistoryListPopup';\r\nexport * from './MoneySelector';\r\nexport * from './PlayerInfo';\r\nexport * from './Scene';\r\nexport * from './popups/PopupRenderer';\r\n","import React, {CSSProperties, useEffect, useState} from 'react';\r\nimport _ from 'lodash';\r\nimport {hot} from \"react-hot-loader\";\r\nimport {PositionType} from \"@web3game/typings/openBox\";\r\nimport posed, {PoseGroup} from 'react-pose';\r\nimport {useVPStyle} from \"./viewPort/getElStyle\";\r\nimport {compose} from \"../utils/compose\";\r\n\r\nexport type PlayerInfoProps = {\r\n    imageIndex: number;\r\n    isActive?: boolean;\r\n    id?: any;\r\n    score?: number;\r\n    pos?: PositionType;\r\n};\r\n\r\nexport function PlayerInfoPure(\r\n    {\r\n        imageIndex,\r\n        isActive = false,\r\n        score,\r\n        pos,\r\n    }: PlayerInfoProps,\r\n) {\r\n    const [isInPosition, setIsInPosition] = useState(false);\r\n\r\n    useEffect(() => {\r\n        setIsInPosition(true);\r\n    }, []);\r\n\r\n    const userImageSize = useVPStyle({\r\n        width: 100,\r\n        height: 100,\r\n    });\r\n    const userScoreSize = useVPStyle({\r\n        width: 55,\r\n        height: 63,\r\n        fontSize: 24,\r\n        top: -70,\r\n        left: 24,\r\n        paddingTop: 16,\r\n    });\r\n\r\n    const getPlayerPosition = (positionType: PositionType | undefined): CSSProperties => {\r\n\r\n        const topBase = 200;\r\n        const leftBase = 340;\r\n        const verticalDiff = 460;\r\n        const horizontalDiff = 280;\r\n\r\n        switch (positionType) {\r\n\r\n            case PositionType.top:\r\n                return useVPStyle({\r\n                    top: topBase,\r\n                    left: leftBase,\r\n                });\r\n\r\n            case PositionType.right:\r\n                return useVPStyle({\r\n                    top: topBase + verticalDiff,\r\n                    left: leftBase + horizontalDiff,\r\n                });\r\n\r\n            case PositionType.bottom:\r\n                return useVPStyle({\r\n                    top: topBase + verticalDiff * 2,\r\n                    left: leftBase,\r\n                });\r\n\r\n            case PositionType.left:\r\n                return useVPStyle({\r\n                    top: topBase + verticalDiff,\r\n                    left: leftBase - horizontalDiff,\r\n                });\r\n\r\n        }\r\n\r\n        return {};\r\n    };\r\n\r\n    const normalPosition = getPlayerPosition(pos);\r\n\r\n    const getActivePosition = (\r\n        positionType: PositionType | undefined,\r\n        orgPosition: CSSProperties,\r\n    ) => {\r\n        const newPos: any = _.clone(orgPosition);\r\n        const activeDiff = 50;\r\n\r\n        switch (pos) {\r\n            case PositionType.top:\r\n                newPos.top += activeDiff;\r\n                break;\r\n            case PositionType.right:\r\n                newPos.left -= activeDiff;\r\n                break;\r\n\r\n            case PositionType.bottom:\r\n                newPos.top -= activeDiff;\r\n                break;\r\n            case PositionType.left:\r\n                newPos.left += activeDiff;\r\n                break;\r\n\r\n        }\r\n\r\n        return newPos;\r\n    };\r\n\r\n    const scoreInfo = score !== null ? (\r\n        <span className=\"userScore\" style={userScoreSize}>\r\n            {score}\r\n        </span>\r\n    ) : null;\r\n\r\n    const Player = posed.div({\r\n        enter: normalPosition,\r\n        active: getActivePosition(pos, normalPosition),\r\n        inActive: normalPosition\r\n    });\r\n\r\n    const className = `playerInfo userImage userImage${imageIndex} ${pos} ${isActive ? 'active' : ''}`;\r\n\r\n    return (\r\n        <PoseGroup>\r\n            {isInPosition && (\r\n                <Player\r\n                    key=\"player\"\r\n                    pose={isActive ? 'active' : 'inActive'}\r\n                    className={className}\r\n                    style={userImageSize}\r\n                >\r\n                    {scoreInfo}\r\n                </Player>\r\n            )}\r\n        </PoseGroup>\r\n    );\r\n}\r\n\r\nexport const PlayerInfo = compose<PlayerInfoProps>(\r\n    hot(module),\r\n)(PlayerInfoPure);\r\n","import BigNumber from \"bignumber.js\";\r\n\r\nexport type GameRecord = {\r\n    id?: any;\r\n    currentUserId: any;\r\n    play: boolean;\r\n    scores: number[];\r\n    sequencs: number[];\r\n    playerScores: BigNumber[];\r\n    playerAwards: BigNumber[];\r\n    playerAddrs: string[];\r\n};\r\n\r\nexport type BetEvent = {\r\n    id?: number;\r\n    issueNo: number;\r\n    money: number;\r\n    betTime: number;\r\n    currentUserId: string;\r\n}\r\n\r\n// export type PositionType = 'top' | 'bottom' | 'left' | 'right';\r\n\r\nexport enum PositionType {\r\n    top = 'top',\r\n    bottom = 'bottom',\r\n    left = 'left',\r\n    right = 'right'\r\n}\r\n\r\nexport type PlayerScoreByPosition = {\r\n    top: number;\r\n    bottom: number;\r\n    left: number;\r\n    right: number;\r\n};\r\n\r\nexport type BoxInfo = {\r\n    boxIndex: number;\r\n    score: number;\r\n    openIndex: number;\r\n    heroId: any;\r\n    heroIndex: number;\r\n\r\n    /** @type {HeroInfo} */\r\n    heroInfo: any;\r\n    heroPos: any;\r\n};\r\n\r\nexport type HeroInfo = {\r\n    id: any;\r\n    index: number;\r\n    pos: any;\r\n    isCurrentUser: boolean;\r\n    score: BigNumber;\r\n    imageIndex: number;\r\n    gain: BigNumber;\r\n};\r\n","export const OpenBoxTimeSpan = 1000; // ms\r\nexport const PrepareBoxTimeSpan = 1500; //\r\nexport const OpeningDuration = 650; // ms\r\n\r\nexport const BoxStatus = {\r\n    closed: 'closed',\r\n    opened: 'opened',\r\n    opening: 'opening',\r\n};\r\n\r\nexport const HeroPositions = {\r\n    top: 'top',\r\n    right: 'right',\r\n    bottom: 'bottom',\r\n    left: 'left',\r\n};\r\n","export const en_US = {\r\n    APP_TITLE: 'APP',\r\n\r\n    HOME: 'Home',\r\n    SHOPS: 'Shops',\r\n    MY: 'My',\r\n    GAME: 'Game',\r\n\r\n    GAME_IS_NOT_READY: 'Game is not ready. Please wait a moment.',\r\n\r\n    RANK: 'Rank',\r\n\r\n    LANGUAGE_SETTING: 'Language Settings',\r\n\r\n    BACK: 'Back',\r\n\r\n    TT_BALANCE: 'TT Balance',\r\n    TOKEN_BALANCE: 'Token Balance',\r\n\r\n    // home\r\n    BUY_NOW: 'Buy Now',\r\n    OTHER: 'Other',\r\n\r\n    HOME_PAGE: {\r\n        ASSET_MANAGEMENT: 'Asset Management',\r\n\r\n        RECEIVE: 'Receive',\r\n        TRANSFER: 'Transfer',\r\n        ANNOUNCEMENT: 'Announcement',\r\n        BALANCE: 'Balance',\r\n        TOTAL_EARNINGS: 'Total Earnings',\r\n\r\n        TRANSFER_ACCOUNT: 'Account',\r\n        TRANSFER_FROM: 'From',\r\n        TRANSFER_TO: 'To',\r\n        TRANSFER_AMOUNT: 'Amount',\r\n\r\n        PRODUCT_NAME_0: 'Task I',\r\n        PRODUCT_NAME_1: 'Task II',\r\n        PRODUCT_NAME_2: 'Task III',\r\n        PRODUCT_NAME_3: 'Task IV',\r\n\r\n        PRODUCT_CTC_VALUE: 'TTI Value',\r\n        PRODUCT_BENEFIT: 'Benefit',\r\n        PRODUCT_PURCHASE_LIMITATION: 'Purchase Limited',\r\n        PRODUCT_USE_TIMES: 'Available Use Times',\r\n        PRODUCT_IS_ALLOW_PURCHASE: 'Is Allow Purchase',\r\n\r\n        PRODUCT_REMAIN_USE_TIMES: 'Remain Use Times',\r\n        PRODUCT_LATEST_GAIN: 'Latest Gain',\r\n        PRODUCT_VALUE: 'Value (TTI)',\r\n        PRODUCT_EARNING: 'Earnings (TTI)',\r\n        PRODUCT_TODAY_EARNING: 'Earnings (TTI)',\r\n        PRODUCT_TOTAL_EARNING: 'Total Earning',\r\n\r\n        INVITATION: 'Invitation',\r\n        ABOUT_US: 'About US',\r\n        ABOUT_US_CONTENT: 'About US Content',\r\n        SYSTEM_ANNOUNCEMENT: 'System Announcement',\r\n        MY_EARNING: 'My Earning',\r\n        TRADING_LOG: 'Trading Log',\r\n\r\n        TODAY_TOTAL_IN_COME: 'total income:',\r\n        THIS_QUOTER_AVAILABLE_BONUS: 'Total Bonus of Quoters:',\r\n\r\n        AVAILABLE_TIMES: ' times available',\r\n        EARNING_TIMES: ' times',\r\n        LATEST_GAIN: 'latest:',\r\n        STATIC_PROFIT_OF_ONE_TIME: 'one time ',\r\n        STATIC_PROFIT_TODAY: 'today ',\r\n        RELEASE_SCROLL: 'RANSOM',\r\n        RENEW_SCROLL: 'RENEW',\r\n\r\n        TASK: 'Task',\r\n\r\n        MY_INVITOR: 'My Invitor',\r\n        MY_INVITATION_CODE: 'My Invitation Code:',\r\n        MY_GROUP: 'My Group',\r\n        SET_INVITOR: 'Set Invitor',\r\n\r\n        QUARTER: 'Quarter ',\r\n        AVAILABLE_QUARTER_REWARD: 'available reward ',\r\n\r\n        STRAIT_REFERER_RANK: 'Strait Referer Rank',\r\n        GAME_PLAY_RANK: 'Game Play Rank',\r\n\r\n        MY_PERFORMANCE: 'My Performance: ',\r\n        RANK_ACCOUNT: 'Account',\r\n        RANK_AMOUNT: 'Amount',\r\n    },\r\n\r\n    GAIN: 'Gain',\r\n\r\n    MY_TASK: {\r\n        MY_TASK_TITLE: 'My Task',\r\n\r\n    },\r\n    // endregion\r\n\r\n    // region openBox\r\n    OPEN_BOX_PAGE: {\r\n        OPEN_BOX: 'Open Box',\r\n\r\n        OPEN_BOX_MONEY_TEXT_1: '10',\r\n        OPEN_BOX_MONEY_TEXT_2: '2000',\r\n        OPEN_BOX_MONEY_TEXT_3: '5000',\r\n        OPEN_BOX_MONEY_TEXT_4: '10000',\r\n        OPEN_BOX_MONEY_TEXT_5: '50000',\r\n    },\r\n\r\n    // endregion\r\n    WEB3: {\r\n        NO_WEB3_PROVIDER: 'No connection to Thunder.Please make sure you are using a DApp browser such as MetaMask or Trust Wallet.Install MetaMask pleaase access：https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn',\r\n        WRONG_NETWORK: 'Wrong network! Please switch to test net https://testnet-rpc.thundercore.com or mainnet https://mainnet-rpc.thundercore.com.',\r\n    },\r\n    \r\n};\r\n","import I18n from 'i18n-js';\r\n\r\n/* eslint @typescript-eslint/camelcase:0 */\r\nimport {en_US} from './locales/en_US';\r\nimport {zh_CN} from './locales/zh_CN';\r\n\r\nimport {LangPack} from \"./typing\";\r\nimport {getLocaleFromLocalStorage, setLocale} from \"./localeHelper\";\r\n\r\nI18n.fallbacks = true;\r\n\r\nI18n.translations = {\r\n    en: en_US,\r\n    zh: zh_CN,\r\n};\r\n\r\nsetLocale(getLocaleFromLocalStorage());\r\n\r\nexport function getLang(): LangPack {\r\n    return new Proxy(en_US, {\r\n        get(obj, prop) {\r\n            return I18n.t(prop as string) || (obj as any)[prop];\r\n        },\r\n    }) as LangPack;\r\n}\r\n","import {LangPack} from \"../typing\";\r\n\r\n/* eslint @typescript-eslint/camelcase:0 */\r\nexport const zh_CN: LangPack = {\r\n    APP_TITLE: '应用标题',\r\n\r\n    HOME: '首页',\r\n    SHOPS: '商城',\r\n    MY: '我的',\r\n    GAME: '游戏',\r\n\r\n    GAME_IS_NOT_READY: '游戏尚未开始，请稍后.',\r\n    RANK: '排行',\r\n    LANGUAGE_SETTING: '设置语言',\r\n\r\n    BACK: '返回',\r\n    TT_BALANCE: 'TT 余额',\r\n    TOKEN_BALANCE: 'TTI 余额',\r\n    BUY_NOW: '立即购买',\r\n    OTHER: '其他',\r\n\r\n    // region home\r\n\r\n    HOME_PAGE: {\r\n        ASSET_MANAGEMENT: '资产管理',\r\n\r\n        RECEIVE: '接收',\r\n        TRANSFER: '转账',\r\n        ANNOUNCEMENT: '公共',\r\n        BALANCE: '余额',\r\n        TOTAL_EARNINGS: '总收益',\r\n\r\n\r\n        TRANSFER_ACCOUNT: '账户',\r\n        TRANSFER_FROM: '从',\r\n        TRANSFER_TO: '转给',\r\n        TRANSFER_AMOUNT: '金额',\r\n\r\n        PRODUCT_NAME_0: '任务 I',\r\n        PRODUCT_NAME_1: '任务 II',\r\n        PRODUCT_NAME_2: '任务 III',\r\n        PRODUCT_NAME_3: '任务 IV',\r\n\r\n        PRODUCT_BENEFIT: '任务收益',\r\n        PRODUCT_CTC_VALUE: '任务价值(TTI)',\r\n        PRODUCT_IS_ALLOW_PURCHASE: '允许购买',\r\n        PRODUCT_PURCHASE_LIMITATION: '任务限制购买',\r\n        PRODUCT_USE_TIMES: '可用次数',\r\n\r\n        PRODUCT_REMAIN_USE_TIMES: '剩余使用次数',\r\n        PRODUCT_LATEST_GAIN: '领取日期',\r\n        PRODUCT_VALUE: '任务价值 (TTI)',\r\n        PRODUCT_EARNING: '任务产生收益 (TTI)',\r\n        PRODUCT_TODAY_EARNING: '今日可领取收益 (TTI)',\r\n        PRODUCT_TOTAL_EARNING: '总收益',\r\n\r\n        INVITATION: '邀请',\r\n        ABOUT_US: '关于我们',\r\n        ABOUT_US_CONTENT: '关于我们的详情',\r\n        SYSTEM_ANNOUNCEMENT: '系统公告',\r\n        MY_EARNING: '我的收益',\r\n        TRADING_LOG: '交易日志',\r\n\r\n        TODAY_TOTAL_IN_COME: '总收益:',\r\n        THIS_QUOTER_AVAILABLE_BONUS: '总季度奖:',\r\n\r\n        AVAILABLE_TIMES: ' 次可用',\r\n        EARNING_TIMES: ' 次',\r\n        LATEST_GAIN: '最近领取:',\r\n        STATIC_PROFIT_OF_ONE_TIME: '每次收益 ',\r\n        STATIC_PROFIT_TODAY: '今日收益 ',\r\n        RELEASE_SCROLL: '赎回',\r\n        RENEW_SCROLL: '续约',\r\n\r\n        TASK: '任务',\r\n\r\n        MY_INVITOR: '我的邀请人:',\r\n        MY_INVITATION_CODE: '我的邀请码:',\r\n        MY_GROUP: '我的团队',\r\n        SET_INVITOR: '设置邀请人',\r\n        QUARTER: '季度 ',\r\n        AVAILABLE_QUARTER_REWARD: '有效奖励 ',\r\n\r\n\r\n        STRAIT_REFERER_RANK: '直推业绩榜单',\r\n        GAME_PLAY_RANK: '游戏投注榜单',\r\n\r\n        MY_PERFORMANCE: '我的业绩: ',\r\n        RANK_ACCOUNT: '账号',\r\n        RANK_AMOUNT: '金额',\r\n    },\r\n\r\n    GAIN: '领取',\r\n\r\n    MY_TASK: {\r\n        MY_TASK_TITLE: '我的任务',\r\n    },\r\n    // endregion\r\n\r\n\r\n\r\n    // region openBox\r\n    OPEN_BOX_PAGE: {\r\n        OPEN_BOX: '开箱子',\r\n\r\n        OPEN_BOX_MONEY_TEXT_1: '10',\r\n        OPEN_BOX_MONEY_TEXT_2: '2000',\r\n        OPEN_BOX_MONEY_TEXT_3: '5000',\r\n        OPEN_BOX_MONEY_TEXT_4: '10000',\r\n        OPEN_BOX_MONEY_TEXT_5: '50000',\r\n    },\r\n\r\n    // endregion\r\n    WEB3: {\r\n        NO_WEB3_PROVIDER: '没有连接到TT链,请确认您是否安装了MetaMask或者Trust Wallet.安装MetaMask请访问：https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn',\r\n        WRONG_NETWORK: '错误的链！请切换到TT测试链：https://testnet-rpc.thundercore.com，或者TT正式公链：https://mainnet-rpc.thundercore.com。',\r\n    },\r\n    \r\n};\r\n","export * from './getLang';\r\n","import * as React from 'react';\r\nimport _ from 'lodash';\r\n\r\n/* eslint @typescript-eslint/indent:0 */\r\ntype RC<P> = React.SFC<P>\r\n    | React.ComponentClass<P>\r\n    | React.ComponentType<P>\r\n    | React.FunctionComponent<P>\r\n    | ((props: P) => React.ReactElement);\r\n\r\ntype HOC<O, P> = (C: RC<O>) => RC<P>;\r\n\r\n// compose components from left to right\r\n// const compose = <P>(C: RC<P>, ...hocs: HOC<any, any>[]): RC<P> => hocs.reduce((g, f) => f(g), C);\r\n\r\ntype AnnotationTypes = HOC<any, any>[];\r\ntype ComposeHocFns<P> = (c: RC<P>) => RC<P>;\r\n\r\nconst filterNotFunction = (fns: any) => _.filter(fns, f => typeof f === 'function');\r\n\r\nexport const compose = <P>(\r\n    ...hocs: AnnotationTypes\r\n): ComposeHocFns<P> => (C: React.ComponentType<P>) => (\r\n    _.reverse(\r\n        filterNotFunction(hocs)\r\n    ).reduce((g, f) => f(g), C)\r\n);\r\n","import EventEmitter from \"./EventEmitter\";\r\n\r\nconst EventKeys = {\r\n    back: 'back',\r\n    push: 'push',\r\n};\r\n\r\nconst NavigatorEvents = new EventEmitter();\r\n\r\nexport function emitBack(componentName: string) {\r\n    NavigatorEvents.emit(EventKeys.back, componentName);\r\n}\r\n\r\nexport function onBack(fn: (componentName: string) => void) {\r\n    return NavigatorEvents.on(EventKeys.back, fn);\r\n}\r\n\r\nexport function emitPush(componentName: string) {\r\n    NavigatorEvents.emit(EventKeys.push, componentName);\r\n}\r\n\r\nexport function onPush(fn: (componentName: string) => void) {\r\n    return NavigatorEvents.on(EventKeys.push, fn);\r\n}\r\n\r\n","import _ from 'lodash';\r\nimport {Navigator, PageTransitionOptions} from \"react-onsenui\";\r\nimport {emitBack} from \"./NavigatorEvents\";\r\n\r\n\r\nconst historyStack: object[] = [];\r\n\r\nexport const hasHistory = () => historyStack.length > 0;\r\n\r\nconst HashSplitter = '|';\r\n\r\nfunction pushHash(hash: string) {\r\n    const currentHash = document.location.hash;\r\n    document.location.hash = `${currentHash}${currentHash ? HashSplitter : ''}${hash}`;\r\n}\r\n\r\nexport async function pushPage(\r\n    navigator: Navigator,\r\n    router: any,\r\n    options: PageTransitionOptions = {\r\n    },\r\n) {\r\n    const routerName = router.key;\r\n    pushHash(routerName);\r\n    historyStack.push({ navigator, router, options, routerName });\r\n    await navigator.pushPage(router, options);\r\n}\r\n\r\nexport function popPage() {\r\n    window.history.back();\r\n}\r\n\r\nfunction popPageInner(componentName: string) {\r\n    const { navigator, routerName } = _.last(historyStack) as any;\r\n\r\n    historyStack.pop();\r\n\r\n    if (routerName === componentName) {\r\n        navigator.popPage();\r\n    }\r\n}\r\n\r\n// handle history back\r\nwindow.addEventListener('hashchange', (event) => {\r\n    const { newURL, oldURL } = event;\r\n    if (newURL.length < oldURL.length) {\r\n        const componentName = oldURL.replace(newURL, '').replace('#', '');\r\n        emitBack(componentName);\r\n        popPageInner(componentName);\r\n    }\r\n});\r\n\r\nif (window.location.hash) {\r\n    window.history.replaceState(null, '', '#');\r\n}\r\n\r\n\r\n","import I18n from 'i18n-js';\r\n\r\nconst LocaleKey = 'locale';\r\n\r\nexport function setLocale(locale: string) {\r\n    I18n.locale = locale;\r\n    localStorage.setItem(LocaleKey, locale);\r\n}\r\n\r\nexport function getLocaleFromLocalStorage() {\r\n    return localStorage.getItem(LocaleKey) || window.navigator.language || 'en';\r\n}\r\n\r\nexport function getLocaleList() {\r\n    return [\r\n        { locale: 'en', text: 'English' },\r\n        { locale: 'zh', text: '中文' },\r\n    ];\r\n}\r\n","/**\r\n * Created by trump on 16/6/18.\r\n */\r\nimport {EventEmitter as EventEmitterBase} from \"events\";\r\n\r\n\r\nclass Collection {\r\n    private collection: (() => void)[] = [];\r\n\r\n    /** @returns {Collection} */\r\n    public push(...fn: (() => void)[]) {\r\n        this.collection.push(...fn);\r\n        return this;\r\n    }\r\n\r\n    public removeAll() {\r\n        this.collection.forEach(fn => fn());\r\n        this.collection = [];\r\n    }\r\n\r\n    public getCollection() {\r\n        return this.collection;\r\n    }\r\n}\r\n\r\nexport class EventEmitter extends EventEmitterBase {\r\n\r\n    protected EventKeys = {};\r\n\r\n    private removeEventListeners: (() => void)[] = [];\r\n\r\n    public constructor(eventKeys?: object) {\r\n        super();\r\n\r\n        /** @field */\r\n        this.EventKeys = { ...eventKeys };\r\n\r\n        this.setMaxListeners(9999);\r\n    }\r\n\r\n    // @ts-ignore\r\n    public on(eventName: string, fn: (() => void) | any) {\r\n        super.on(eventName, fn);\r\n\r\n        const removeFn = () => {\r\n            this.removeListener(eventName, fn);\r\n            this.removeEventListeners = this.removeEventListeners.filter(o => o !== removeFn);\r\n        };\r\n\r\n        removeFn.eventName = eventName;\r\n\r\n        if (!this.removeEventListeners) {\r\n            this.removeEventListeners = [];\r\n        }\r\n\r\n        this.removeEventListeners.push(removeFn);\r\n\r\n        return removeFn;\r\n    }\r\n\r\n    public one(eventName: string, fn: (...args: any[]) => void) {\r\n        const dispose = this.on(eventName, (...args: any[]) => {\r\n            fn(...args);\r\n            dispose();\r\n        });\r\n\r\n        return dispose;\r\n    }\r\n\r\n    public removeByName(name: string) {\r\n        this.removeEventListeners.forEach((fn) => {\r\n            if ((fn as any).eventName === name) fn();\r\n        });\r\n\r\n        this.removeEventListeners = this.removeEventListeners.filter(\r\n            o => (o as any).eventName !== name,\r\n        );\r\n    }\r\n\r\n    public removeAll() {\r\n        this.removeEventListeners.forEach(fn => fn());\r\n        this.removeEventListeners = [];\r\n    }\r\n\r\n    /** @returns Collection */\r\n    public createCollection() {\r\n        return new Collection();\r\n    }\r\n\r\n    public listenToMany(...listeners: (() => void)[]) {\r\n        const collection = this.createCollection();\r\n        collection.getCollection().push(...listeners);\r\n        return () => collection.removeAll();\r\n    }\r\n}\r\n\r\nexport default EventEmitter;\r\n","import React, {useCallback, useEffect} from 'react';\r\nimport {Page} from \"react-onsenui\";\r\nimport _ from 'lodash';\r\nimport {Provider} from \"mobx-react\";\r\nimport {hot} from \"react-hot-loader\";\r\nimport {\r\n    GameLayout,\r\n    HistoryListPopup,\r\n    MoneySelector,\r\n    PopupElement,\r\n    Scene,\r\n} from \"@web3game/common/components\";\r\nimport * as commonStores from '@web3game/common/stores';\r\nimport {GameUIScene, PopupNames} from \"@web3game/common/utils/constants\";\r\nimport {popPage} from \"@web3game/common/utils/navigatorHelper\";\r\nimport {BetEvent} from \"@web3game/typings/openBox\";\r\nimport {AuthForm} from \"@web3game/common/components/AuthForm\";\r\nimport {getCommonAPI} from \"@web3game/apis/common/getCommonAPI\";\r\nimport {getOpenBoxAPI} from \"@web3game/apis/openbox/getOpenBoxAPI\";\r\nimport '@web3game/common/styles/common.scss';\r\nimport {ViewPortSizeProvider} from \"@web3game/common/components/viewPort/ViewPortSizeProvider\";\r\nimport * as stores from './stores';\r\nimport './styles/openBox.scss';\r\nimport {GameResultPopup} from \"./components/GameResultPopup\";\r\nimport {BoxGameDesk} from \"./components/BoxGameDesk\";\r\nimport {getOpenBoxMoneyList} from \"./core/functions/getOpenBoxMoneyList\";\r\nimport {compose} from \"@web3game/common/utils/compose\";\r\n\r\n// @ts-ignore\r\nwindow.OpenBoxStores = {\r\n    ...stores,\r\n    ...commonStores,\r\n};\r\n\r\n// region store helpers\r\nconst { gamePlayerStore } = stores;\r\nconst { gameUIStore, accountStore } = commonStores;\r\n\r\nconst onShowHistory = () => {\r\n    gameUIStore.setVisiblePopup(PopupNames.history);\r\n};\r\n\r\nconst onPlayGame = (betEvent: BetEvent) => {\r\n    (async () => {\r\n        const openBoxAPI = await getOpenBoxAPI();\r\n\r\n        const gameRecord = await openBoxAPI.loadGame(betEvent);\r\n        gameUIStore.setVisiblePopup(PopupNames.none);\r\n        gameUIStore.setScene(GameUIScene.gamePlayer);\r\n        gamePlayerStore.startGame(gameRecord);\r\n\r\n        // 游戏结束弹出弹窗\r\n        gamePlayerStore.onGameEnd(() => gameUIStore.setVisiblePopup(PopupNames.gameResult));\r\n\r\n    })();\r\n};\r\n\r\nconst onQuitPlayer = () => {\r\n    gamePlayerStore.quit();\r\n    gameUIStore.setScene(GameUIScene.moneySelector);\r\n};\r\n\r\nconst onQuitGameResult = () => {\r\n    gameUIStore.setVisiblePopup(PopupNames.none);\r\n    gameUIStore.setScene(GameUIScene.moneySelector);\r\n    gamePlayerStore.quit();\r\n};\r\n\r\nconst onSubmitAuth = (params: any) => {\r\n    (async () => {\r\n        const { submitGame } = await getCommonAPI();\r\n        try {\r\n            await submitGame({\r\n                ...params,\r\n                betType: 3,\r\n                issueNo: 0,\r\n                nums: [],\r\n                amounts: [],\r\n                betAddress: gamePlayerStore.betAddress,\r\n            });\r\n        } catch (error) {\r\n            alert(error);\r\n        }\r\n        gameUIStore.setVisiblePopup(PopupNames.none);\r\n    })();\r\n\r\n};\r\n\r\nconst onSelectMoney = (money: number) => {\r\n    gameUIStore.setVisiblePopup(PopupNames.authForm, { money });\r\n};\r\n\r\nconst prepareRecords = (records: any[], currentUserId: string): object[] => _.map(\r\n    records,\r\n    record => ({\r\n        ...record,\r\n        currentUserId,\r\n        id: record.id || _.random(0),\r\n    }),\r\n);\r\n\r\n\r\n// endregion\r\n\r\nexport function OpenBoxGame() {\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            const { getHistoryList, getBetAddress } = await getOpenBoxAPI();\r\n            const list = await getHistoryList();\r\n            stores.historyStore.setDisplayList(prepareRecords(list, accountStore.account));\r\n            const betAddress = await getBetAddress();\r\n            gamePlayerStore.setBetAddress(betAddress);\r\n        })();\r\n\r\n        // unbind listeners of gamePlayerStore\r\n        return () => {\r\n            gamePlayerStore.quit();\r\n        };\r\n    });\r\n\r\n    const popups: PopupElement[] = [\r\n        { name: PopupNames.history, renderer: () => <HistoryListPopup onPlayGame={onPlayGame} /> },\r\n        { \r\n            name: PopupNames.authForm,\r\n            renderer: () => (\r\n                <AuthForm \r\n                    onSubmit={onSubmitAuth}\r\n                />\r\n            ), \r\n        },\r\n        {\r\n            name: PopupNames.gameResult,\r\n            renderer: () => (<GameResultPopup onQuit={onQuitGameResult} />),\r\n        },\r\n    ];\r\n\r\n    const onQuitGame = useCallback(() => popPage(), []);\r\n\r\n    return (\r\n        <Page className=\"openBoxGamePage\">\r\n            <ViewPortSizeProvider\r\n                perfectHeight={1344}\r\n                perfectWidth={750}\r\n                preferMaxWidth={600}\r\n            >\r\n                <Provider {...commonStores} {...stores}>\r\n                    <GameLayout\r\n                        onShowHistory={onShowHistory}\r\n                        onQuitGame={onQuitGame}\r\n                        onQuitPlayer={onQuitPlayer}\r\n                        popups={popups}\r\n                    >\r\n\r\n                        <Scene name={GameUIScene.moneySelector}>\r\n                            {() => (\r\n                                <MoneySelector\r\n                                    moneyList={getOpenBoxMoneyList()}\r\n                                    onSelect={onSelectMoney}\r\n                                />\r\n                            )}\r\n                        </Scene>\r\n\r\n                        <Scene name={GameUIScene.gamePlayer}>\r\n                            {() => <BoxGameDesk />}\r\n                        </Scene>\r\n                    </GameLayout>\r\n                </Provider>\r\n            </ViewPortSizeProvider>\r\n        </Page>\r\n    );\r\n}\r\n\r\nexport default compose(\r\n    hot(module),\r\n    React.memo,\r\n)(OpenBoxGame);\r\n","module.exports = __webpack_public_path__ + \"static/media/beijingtu.03f0d956.png\";","import React, {useCallback} from 'react';\r\nimport {inject} from \"mobx-react\";\r\nimport {Popup} from \"./popups/Popup\";\r\nimport {AccountStore} from \"../stores/AccountStore\";\r\nimport {GameUIStore} from '../stores/GameUIStore';\r\n\r\ntype AuthFormPureProps = {\r\n    onSubmit: (params: any) => void;\r\n    account?: string;\r\n    ttBalance?: any;\r\n    tokenBalance?: any;\r\n    gas?: any;\r\n    money?: number;\r\n};\r\n\r\nexport function AuthFormPure(\r\n    {\r\n        onSubmit,\r\n        account,\r\n        ttBalance,\r\n        tokenBalance,\r\n        money = 0,\r\n    }: AuthFormPureProps,\r\n) {\r\n\r\n    const handleSubmit = useCallback(() => {\r\n        onSubmit({\r\n            account,\r\n            money,\r\n        });\r\n    }, []);\r\n\r\n    return (\r\n        <Popup title=\"确认提交\" className=\"gameAuthFormPopup\">\r\n            <div className=\"gameAuthForm\">\r\n                <div className=\"gameAuthFormField\">\r\n                    账号&nbsp;:&nbsp;\r\n                    {account}\r\n                </div>\r\n                <div className=\"gameAuthFormField\">\r\n                    TT余额&nbsp;:&nbsp;\r\n                    {ttBalance}\r\n                </div>\r\n                <div className=\"gameAuthFormField\">\r\n                    TOKEN余额&nbsp;:&nbsp;\r\n                    {tokenBalance}\r\n                </div>\r\n                <hr />\r\n                <div className=\"gameAuthFormField\" style={{marginTop: '20px'}}>\r\n                    <button type=\"submit\" onClick={handleSubmit}>\r\n                        提交\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </Popup>\r\n    );\r\n}\r\n\r\ntype AuthFormInjectedProps = {\r\n    accountStore?: AccountStore;\r\n    gameUIStore?: GameUIStore;\r\n};\r\n\r\n\r\nexport const AuthForm = inject(\r\n    (\r\n        {\r\n            accountStore,\r\n            gameUIStore,\r\n        }: AuthFormInjectedProps,\r\n    ) => {\r\n        if (!accountStore || !gameUIStore) {\r\n            return {};\r\n        }\r\n\r\n        const { popupData: {money} } = gameUIStore;\r\n\r\n        const { \r\n            account, \r\n            ttBalance, \r\n            tokenBalance, \r\n            gas, \r\n        } = accountStore;\r\n\r\n        return { account, ttBalance, tokenBalance, gas, money };\r\n    },\r\n)(AuthFormPure);\r\n","import {OpenBoxAPI} from './OpenBoxAPI';\r\nimport {isUsingMockAPI} from \"../isUsingMockAPI\";\r\n\r\n\r\nexport async function getOpenBoxAPI(): Promise<OpenBoxAPI> {\r\n\r\n    if (isUsingMockAPI()) {\r\n        return import('./OpenBoxAPIMock').then(m => m.default);\r\n    }\r\n\r\n    return import('./OpenBoxAPIReal').then(m => m.default);\r\n}\r\n","import React, {useEffect, useState} from \"react\";\r\nimport _ from 'lodash';\r\nimport {\r\n    getAdjustedSizeInfo,\r\n    getWinSize,\r\n    InitialSizeInfo,\r\n    PreferMode,\r\n    ViewPortSizeContext,\r\n} from \"./viewPortSizeHelper\";\r\n\r\n\r\nexport type ViewPortSizeProps = {\r\n    children: React.ReactNode | React.ReactElement;\r\n\r\n    perfectHeight: number;\r\n    perfectWidth: number;\r\n\r\n    preferMaxWidth?: number;\r\n    preferMaxHeight?: number;\r\n\r\n    preferMode?: PreferMode;\r\n}\r\n\r\nexport const ViewPortSizeProvider = React.memo(\r\n    (\r\n        {\r\n            preferMode = PreferMode.width,\r\n\r\n            perfectHeight,\r\n            perfectWidth,\r\n\r\n            preferMaxHeight = 0,\r\n            preferMaxWidth = 900,\r\n\r\n            children,\r\n        }: ViewPortSizeProps\r\n    ) => {\r\n\r\n        const [{ winHeight, winWidth }, setWinSize] = useState(getWinSize());\r\n\r\n        useEffect(() => {\r\n            window.addEventListener(\r\n                'resize',\r\n                () => {\r\n                    setWinSize(getWinSize());\r\n                }\r\n            );\r\n        }, []);\r\n\r\n        const { Provider } = ViewPortSizeContext;\r\n\r\n        const staticSizeInfo = {\r\n            winHeight,\r\n            winWidth,\r\n\r\n            perfectHeight,\r\n            perfectWidth,\r\n\r\n            preferMaxWidth,\r\n        };\r\n\r\n        const adjustedSizeInfo = getAdjustedSizeInfo({\r\n            ...staticSizeInfo,\r\n            preferMode,\r\n        });\r\n\r\n        const sizeInfo = _.extend<InitialSizeInfo>({}, staticSizeInfo, adjustedSizeInfo);\r\n\r\n        return (\r\n            <Provider value={sizeInfo}>\r\n                {children}\r\n            </Provider>\r\n        );\r\n    },\r\n);\r\n","module.exports = __webpack_public_path__ + \"static/media/oh_no.4b9dfc8c.mp3\";","module.exports = __webpack_public_path__ + \"static/media/add-score.e14110a0.mp3\";","module.exports = __webpack_public_path__ + \"static/media/result.e786a7c7.wav\";","import React from 'react';\r\nimport {inject} from \"mobx-react\";\r\nimport {Popup} from \"@web3game/common/components/popups/Popup\";\r\nimport {Table} from \"@web3game/common/components/Table\";\r\nimport {PlayerInfo} from \"@web3game/common/components\";\r\nimport {GameRecord} from \"@web3game/typings/openBox\";\r\nimport {GamePlayerStore} from \"../stores/GamePlayerStore\";\r\nimport {getSortedHeroList} from \"../core/gameHelper\";\r\n\r\n\r\ntype GameResultPopupProps = {\r\n    onQuit: () => void;\r\n    gameRecord?: GameRecord;\r\n    web3?: any;\r\n};\r\n\r\nconst toNumber = (num: any) => {\r\n    if (num && num.toNumber) {\r\n        return num.toNumber();\r\n    }\r\n\r\n    return num;\r\n};\r\n\r\nexport function GameResultPopupPure(\r\n    {\r\n        onQuit,\r\n        gameRecord,\r\n        web3,\r\n    }: GameResultPopupProps,\r\n) {\r\n\r\n    if (!web3) {\r\n        return null;\r\n    }\r\n\r\n    const heroList = !gameRecord ? [] : getSortedHeroList(gameRecord)\r\n        .sort((a, b) => {\r\n\r\n            if (a.score && b.score && a.score.comparedTo && b.score.comparedTo) {\r\n                return b.score.comparedTo(a.score);\r\n            }\r\n\r\n            // @ts-ignore\r\n            return a - b;\r\n        });\r\n\r\n    const tHead = (\r\n        <tr>\r\n            <th className=\"rankIcon\">\r\n                {\" \"}\r\n            </th>\r\n            <th className=\"playerIcon\">\r\n                {\" \"}\r\n            </th>\r\n            <th className=\"playerName\">\r\n                玩家\r\n            </th>\r\n            <th className=\"payerScore\">\r\n                钻石                \r\n            </th>\r\n            <th className=\"payerAward\">\r\n                奖励\r\n            </th>\r\n        </tr>\r\n    );\r\n    \r\n    return (\r\n        <Popup title=\"排行\" onQuit={onQuit} className=\"gameResultPopup\">\r\n            <Table tHead={tHead} className=\"gameResult\">\r\n                {heroList.map((hero, index) => (\r\n                    <tr key={hero.id}>\r\n                        <td className=\"rankIcon\">\r\n                            <div className={`rankImage rankImage${index + 1}`}>{index}</div>\r\n                        </td>\r\n                        <td className=\"playerIcon\">\r\n                            <PlayerInfo id={hero.id} imageIndex={hero.imageIndex} />\r\n                        </td>\r\n                        <td className=\"playerName\">{hero.id.slice(-6)}</td>\r\n                        <td className=\"payerScore\">{toNumber(hero.score)}</td>\r\n                        <td className=\"payerAward\">{web3.fromWei(toNumber(hero.gain), 'ether')}</td>\r\n                    </tr>\r\n                ))}\r\n            </Table>\r\n        </Popup>\r\n    );\r\n}\r\n\r\ntype GameResultPopupInjectedProps = {\r\n    gamePlayerStore?: GamePlayerStore;\r\n    web3?: any;\r\n};\r\n\r\nexport const GameResultPopup = inject(\r\n    ({ gamePlayerStore, web3 }: GameResultPopupInjectedProps) => (\r\n        {\r\n            gameRecord: gamePlayerStore ? gamePlayerStore.gameRecord : null,\r\n            web3,\r\n        }\r\n    ),\r\n)(GameResultPopupPure);\r\n","import {getLang} from \"@web3game/lang\";\r\n\r\nexport const getOpenBoxMoneyList = () => [\r\n    { money: 10, text: getLang().OPEN_BOX_PAGE.OPEN_BOX_MONEY_TEXT_1 },\r\n    { money: 2000, text: getLang().OPEN_BOX_PAGE.OPEN_BOX_MONEY_TEXT_2 },\r\n    { money: 5000, text: getLang().OPEN_BOX_PAGE.OPEN_BOX_MONEY_TEXT_3 },\r\n    { money: 10000, text: getLang().OPEN_BOX_PAGE.OPEN_BOX_MONEY_TEXT_4 },\r\n    { money: 50000, text: getLang().OPEN_BOX_PAGE.OPEN_BOX_MONEY_TEXT_5 },\r\n];\r\n","import {action, observable} from \"mobx\";\r\n\r\n\r\nexport class HistoryStore {\r\n\r\n    @observable\r\n    public displayList: object[] = [];\r\n\r\n    @action\r\n    public setDisplayList(history: object[]) {\r\n        this.displayList = history;\r\n    }\r\n\r\n}\r\n\r\nexport const historyStore = new HistoryStore();\r\n","import {EventEmitter} from \"../../common/utils/EventEmitter\";\r\n\r\nconst ON_GAME_NOT_READY = 'ON_GAME_NOT_READY';\r\n\r\nexport class GlobalEvent extends EventEmitter {\r\n\r\n    public onGameReadyStatusChange = (fn: () => void) => this.on(ON_GAME_NOT_READY, fn);\r\n\r\n    public triggerGameReadyStatus = (isReady: boolean) => this.emit(ON_GAME_NOT_READY, isReady);\r\n\r\n}\r\n\r\nexport const openBoxEvents = new GlobalEvent({});\r\n\r\nexport default openBoxEvents;\r\n","import {action, observable} from \"mobx\";\r\nimport * as _ from 'lodash';\r\nimport {BoxInfo, GameRecord, PlayerScoreByPosition, PositionType} from \"@web3game/typings/openBox\";\r\n\r\nimport {EventEmitter} from \"../../common/utils/EventEmitter\";\r\nimport {OpenBoxTimeSpan, OpeningDuration, PrepareBoxTimeSpan} from \"../core/openBoxConstants\";\r\n\r\n\r\nimport {getSortedBoxes, playSound, Sounds} from \"../core/gameHelper\";\r\nimport {openBoxEvents} from \"../eventBus/openBoxEvents\";\r\n\r\n/**\r\n * @typedef {Object} GameRecord\r\n * @property {[Number]} scores\r\n * @property {[Number]} sequencs\r\n * @property {[Number]} playerScores\r\n * */\r\n\r\n\r\n\r\nconst getInitialScores = (): PlayerScoreByPosition => ({\r\n    top: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    left: 0,\r\n});\r\n\r\nexport class GamePlayerStore extends EventEmitter {\r\n\r\n    public EventKeys = {\r\n        start: 'start',\r\n        end: 'end',\r\n        pause: 'pause',\r\n        resume: 'resume',\r\n        beginOpenBox: 'beginOpenBox',\r\n        finishOpenBox: 'finishOpenBox',\r\n    };\r\n\r\n    @observable\r\n    public betAddress = '';\r\n\r\n    @action\r\n    public setBetAddress(betAddress: string) {\r\n        this.betAddress = betAddress;\r\n    }\r\n\r\n    @observable\r\n    public gameRecord: GameRecord | null = null;\r\n\r\n    @observable\r\n    public openIndex = -1;\r\n\r\n    @observable\r\n    public finishedOpenIndex: number = -1;\r\n\r\n    @observable\r\n    public openingBox: BoxInfo | null | undefined = null;\r\n\r\n    @observable\r\n    public isPaused = false;\r\n\r\n    private playerTimeout = 0;\r\n\r\n    @observable\r\n    public playerScores: PlayerScoreByPosition = getInitialScores();\r\n\r\n    @observable\r\n    public boomedHeroId = null;\r\n\r\n    @observable\r\n    public fasterTimes = 1; // 播放时间间隔倍数\r\n\r\n\r\n    /**\r\n     * @param {CurrentGameRecord} gameRecord\r\n     * */\r\n    @action\r\n    public startGame(gameRecord: GameRecord): Promise<any> {\r\n        this.resetPlayer();\r\n        if (!gameRecord) return Promise.resolve();\r\n\r\n        if (gameRecord.play === false) {\r\n            this.isPaused = true;\r\n            openBoxEvents.triggerGameReadyStatus(false);\r\n        } else {\r\n            openBoxEvents.triggerGameReadyStatus(true);\r\n        }\r\n\r\n        this.gameRecord = gameRecord;\r\n\r\n        this.emit(this.EventKeys.start);\r\n\r\n        return Promise.resolve(\r\n            this.playBoxByIndex(0),\r\n        ).then((isEnd) => {\r\n            if (isEnd && !this.isPaused) {\r\n                this.emit(this.EventKeys.end);\r\n                playSound(Sounds.result);\r\n            }\r\n        });\r\n    }\r\n\r\n    @action\r\n    public restartGame() {\r\n        if (this.gameRecord) {\r\n            this.startGame(this.gameRecord);\r\n        }\r\n    }\r\n\r\n    @action\r\n    private clearPlayerTimeout() {\r\n        if (this.playerTimeout) {\r\n            clearTimeout(this.playerTimeout);\r\n            this.playerTimeout = 0;\r\n        }\r\n    }\r\n\r\n    @action\r\n    public playBoxByIndex(openIndex: number): any {\r\n        if (!this.gameRecord) {\r\n            return false;\r\n        }\r\n\r\n        this.openIndex = openIndex;\r\n\r\n        this.openingBox = null;\r\n\r\n        const sortedBoxes = getSortedBoxes(this.gameRecord);\r\n\r\n        const getBoxByOpenIndex = (index: number) => _.find(\r\n            sortedBoxes,\r\n            box => box.openIndex === index,\r\n        );\r\n\r\n        if (openIndex < sortedBoxes.length && openIndex >= 0) {\r\n\r\n            return this.waitTimeout(\r\n                action('onPrepareBox', () => {\r\n                    const openingBox = getBoxByOpenIndex(openIndex);\r\n\r\n                    this.openingBox = openingBox;\r\n\r\n                    this.emit(this.EventKeys.beginOpenBox, openIndex, openingBox);\r\n\r\n                    return this.waitTimeout(\r\n                        action('onBoxOpen', () => {\r\n\r\n                            if (this.isPaused) {\r\n                                return false;\r\n                            }\r\n\r\n\r\n                            this.finishedOpenIndex = openIndex;\r\n\r\n                            this.emit(this.EventKeys.finishOpenBox, openIndex, openingBox);\r\n\r\n                            if (openingBox) {\r\n                                const heroPos = openingBox.heroPos as PositionType;\r\n\r\n                                if (openingBox.score === 0) {\r\n                                    this.playerScores[heroPos] = 0;\r\n                                    this.boomedHeroId = openingBox.heroId;\r\n                                    playSound(Sounds.boom);\r\n                                } else {\r\n                                    playSound(Sounds.addScore);\r\n                                    const oldScore = this.playerScores[heroPos];\r\n                                    this.playerScores[heroPos] = oldScore\r\n                                        + openingBox.score;\r\n                                    this.boomedHeroId = null;\r\n                                }\r\n                            }\r\n\r\n                            return this.waitTimeout(\r\n                                () => this.playBoxByIndex(openIndex + 1),\r\n                                OpeningDuration,\r\n                            );\r\n\r\n                        }),\r\n                        OpenBoxTimeSpan,\r\n                    );\r\n                }),\r\n                PrepareBoxTimeSpan,\r\n            );\r\n\r\n\r\n        }\r\n\r\n        this.openIndex = -1;\r\n        this.openingBox = null;\r\n\r\n        return true;\r\n\r\n    }\r\n\r\n    @action\r\n    public clearBoomer() {\r\n        this.boomedHeroId = null;\r\n    }\r\n\r\n    public waitTimeout(actionFn: () => any, timeout = OpeningDuration) {\r\n        return new Promise((resolve) => {\r\n            // @ts-ignore\r\n            this.playerTimeout = setTimeout(() => resolve(actionFn()), timeout * this.fasterTimes);\r\n        });\r\n    }\r\n\r\n    @action\r\n    public toggleFaster() {\r\n        if (this.fasterTimes === 1) {\r\n            this.fasterTimes = 0.2;\r\n        } else {\r\n            this.fasterTimes = 1;\r\n        }\r\n    }\r\n\r\n    @action\r\n    public pause = () => {\r\n        this.isPaused = true;\r\n        this.clearPlayerTimeout();\r\n    };\r\n\r\n    @action\r\n    public resume = () => {\r\n        this.isPaused = false;\r\n        this.playBoxByIndex(this.openIndex);\r\n    };\r\n\r\n    @action\r\n    public resetPlayer() {\r\n        this.fasterTimes = 1;\r\n        this.gameRecord = null;\r\n        this.openingBox = null;\r\n        this.openIndex = -1;\r\n        this.finishedOpenIndex = -1;\r\n        this.isPaused = false;\r\n        this.boomedHeroId = null;\r\n        this.playerScores = getInitialScores();\r\n        this.clearPlayerTimeout();\r\n    }\r\n\r\n    @action\r\n    public quit() {\r\n        this.resetPlayer();\r\n        this.removeAll();\r\n    }\r\n\r\n    /** @param {function(openIndex: Number, boxInfo: BoxInfo)} fn */\r\n    public onBeginOpenBox(fn: () => void) {\r\n        return this.on(this.EventKeys.beginOpenBox, fn);\r\n    }\r\n\r\n    /** @param {function(openIndex: Number, boxInfo: BoxInfo)} fn */\r\n    public onFinishOpenBox(fn: () => void) {\r\n        return this.on(this.EventKeys.finishOpenBox, fn);\r\n    }\r\n\r\n    public onStart(fn: () => void) {\r\n        return this.on(this.EventKeys.start, fn);\r\n    }\r\n\r\n    public onGameEnd(fn: () => void) {\r\n        return this.on(this.EventKeys.end, fn);\r\n    }\r\n\r\n    public onPause(fn: () => void) {\r\n        return this.on(this.EventKeys.pause, fn);\r\n    }\r\n\r\n    public onResume(fn: () => void) {\r\n        return this.on(this.EventKeys.resume, fn);\r\n    }\r\n\r\n}\r\n\r\nexport const gamePlayerStore = new GamePlayerStore();\r\n","export {historyStore} from './HistoryStore';\r\nexport {gamePlayerStore} from './GamePlayerStore';\r\n","import React from 'react';\r\nimport {inject, observer} from \"mobx-react\";\r\nimport {useVPStyle} from \"@web3game/common/components/viewPort/getElStyle\";\r\nimport {BoxStatus} from \"../core/openBoxConstants\";\r\nimport {GamePlayerStore} from \"../stores/GamePlayerStore\";\r\n\r\nconst AnimatedClassNames = {\r\n    [BoxStatus.opening]: 'animated swing active',\r\n};\r\n\r\ntype BoxInjectedStores = {\r\n    gamePlayerStore?: GamePlayerStore;\r\n};\r\n\r\ntype BoxProps = {\r\n    gamePlayerStore?: GamePlayerStore;\r\n    boxIndex: number;\r\n    openIndex: number;\r\n    score: number;\r\n    boxCover: number;\r\n};\r\n\r\n@inject(\r\n    (stores: BoxInjectedStores) => ({\r\n        gamePlayerStore: stores.gamePlayerStore,\r\n    }),\r\n)\r\n@observer\r\nexport class Box extends React.Component<BoxProps> {\r\n\r\n    static defaultProps = {\r\n        boxCover: 0,\r\n    };\r\n\r\n    getStatus() {\r\n        const { boxIndex, gamePlayerStore } = this.props;\r\n        const isOpened = this.isBoxOpened();\r\n        const isOpening = gamePlayerStore && gamePlayerStore.openingBox\r\n            && (gamePlayerStore.openingBox.boxIndex === boxIndex);\r\n\r\n        if (isOpened) {\r\n            return BoxStatus.opened;\r\n        }\r\n\r\n        return isOpening ? BoxStatus.opening : BoxStatus.closed;\r\n    }\r\n\r\n    getAnimatedClassByStatus(status: string) {\r\n        const { gamePlayerStore } = this.props;\r\n        if (!gamePlayerStore || gamePlayerStore.isPaused) {\r\n            return '';\r\n        }\r\n\r\n        return AnimatedClassNames[status] || '';\r\n    }\r\n\r\n    isBoxOpened = () => {\r\n        const { openIndex, gamePlayerStore } = this.props;\r\n        if (!gamePlayerStore) {\r\n            return false;\r\n        }\r\n\r\n        return openIndex <= gamePlayerStore.finishedOpenIndex;\r\n    };\r\n\r\n    render() {\r\n        const { score, boxCover } = this.props;\r\n        const isBoomer = score === 0;\r\n        const status = this.getStatus();\r\n        const boomClassName = isBoomer ? 'boom' : '';\r\n        const scoreClassName = score >= 5 ? 'largerThen5' : 'lessThen5';\r\n        const boxCoverClassName = `box${boxCover}`;\r\n        const boxClassName = `${boomClassName} ${scoreClassName} score score${score}`;\r\n\r\n        const boxWrapperClassName = `${boxCoverClassName}`;\r\n        const boxSize = useVPStyle({\r\n            width: 100,\r\n            height: 132,\r\n        });\r\n\r\n        return (\r\n            <div\r\n                className={`box box-${status} ${boxWrapperClassName} ${this.getAnimatedClassByStatus(status)} xk`}\r\n                style={boxSize}\r\n            >\r\n                {!this.isBoxOpened() ? null : (\r\n                    <div className={boxClassName}>\r\n                        {isBoomer ? null : ` `}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React, {useEffect} from 'react';\r\nimport {inject} from \"mobx-react\";\r\nimport _ from 'lodash';\r\nimport {Table} from \"@web3game/common/components/Table\";\r\nimport {getLang} from \"@web3game/lang\";\r\nimport {GameRecord} from \"@web3game/typings/openBox\";\r\nimport {useVPStyle} from \"@web3game/common/components/viewPort/getElStyle\";\r\nimport {Box} from \"./Box\";\r\nimport {getSortedBoxes} from \"../core/gameHelper\";\r\nimport {GamePlayerStore} from \"../stores/GamePlayerStore\";\r\n\r\nconst ColumnNum = 4;\r\n\r\nconst range4 = () => _.range(4);\r\n\r\ntype BoxGridProps = {\r\n    gameRecord?: GameRecord;\r\n};\r\n\r\nexport function BoxGridPure({ gameRecord }: BoxGridProps) {\r\n\r\n    useEffect(() => {\r\n        if (gameRecord && !gameRecord.play) {\r\n            setTimeout(() => alert(getLang().GAME_IS_NOT_READY), 300);\r\n        }\r\n    }, [gameRecord && gameRecord.id]);\r\n\r\n    const renderColumn = (rowIndex: number, columnIndex: number) => {\r\n        const boxIndex = rowIndex * ColumnNum + columnIndex;\r\n        const boxInfo = gameRecord ? getSortedBoxes(gameRecord)[boxIndex] : null;\r\n\r\n        if (!boxInfo) {\r\n            return (\r\n                <td key={columnIndex} />\r\n            );\r\n        }\r\n\r\n        return (\r\n            <td key={columnIndex}>\r\n                <Box\r\n                    boxIndex={boxIndex}\r\n                    openIndex={boxInfo.openIndex}\r\n                    score={boxInfo.score}\r\n                    boxCover={_.random(1, 3)}\r\n                />\r\n            </td>\r\n        );\r\n    };\r\n\r\n    const renderRow = (rowIndex: number) => (\r\n        <tr key={rowIndex}>\r\n            {range4().map(colIndex => renderColumn(rowIndex, colIndex))}\r\n        </tr>\r\n    );\r\n\r\n    const tableSize = useVPStyle({\r\n        width: 320,\r\n    });\r\n\r\n    return (\r\n        <Table\r\n            className=\"boxGrid\"\r\n            style={tableSize}\r\n        >\r\n            {range4().map(renderRow)}\r\n        </Table>\r\n    );\r\n}\r\n\r\ntype BoxGridInjectedStores = {\r\n    gamePlayerStore?: GamePlayerStore;\r\n};\r\n\r\n\r\nexport const BoxGrid = inject(\r\n    ({ gamePlayerStore }: BoxGridInjectedStores) => (\r\n        { gameRecord: gamePlayerStore && gamePlayerStore.gameRecord }\r\n    ),\r\n)(BoxGridPure);\r\n","import React from 'react';\r\nimport {inject, observer} from \"mobx-react\";\r\nimport {PlayerInfo} from \"@web3game/common/components\";\r\nimport {GameRecord, PositionType} from \"@web3game/typings/openBox\";\r\nimport {getSortedHeroList} from \"../core/gameHelper\";\r\nimport {GamePlayerStore} from \"../stores/GamePlayerStore\";\r\nimport {BoxGrid} from \"./BoxGrid\";\r\n\r\nexport type BoxGameDeskProps = {\r\n    gameRecord?: GameRecord;\r\n    playerScores?: object;\r\n    openIndex?: number;\r\n};\r\n\r\nexport function BoxGameDeskPure(\r\n    {\r\n        gameRecord,\r\n        playerScores,\r\n        openIndex = -1,\r\n    }: BoxGameDeskProps\r\n) {\r\n    const heroList = gameRecord ? getSortedHeroList(gameRecord) : [];\r\n    const realTimeScore = (pos: PositionType) => {\r\n        if (!gameRecord || !playerScores) {\r\n            return 0;\r\n        }\r\n\r\n        return (playerScores as any)[pos];\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {heroList.map(\r\n                hero => (\r\n                    <PlayerInfo\r\n                        key={hero.id}\r\n                        imageIndex={hero.imageIndex}\r\n                        score={realTimeScore(hero.pos)}\r\n                        pos={hero.pos}\r\n                        isActive={openIndex % 4 === hero.index}\r\n                    />\r\n                ),\r\n            )}\r\n\r\n            <BoxGrid />\r\n        </>\r\n    );\r\n}\r\n\r\nexport type BoxGameDeskInjectedProps = {\r\n    gamePlayerStore?: GamePlayerStore;\r\n};\r\n\r\nexport const BoxGameDesk = inject(\r\n    ({ gamePlayerStore }: BoxGameDeskInjectedProps) => ({\r\n        gameRecord: gamePlayerStore ? gamePlayerStore.gameRecord : null,\r\n        playerScores: gamePlayerStore ? gamePlayerStore.playerScores : {},\r\n        openIndex: gamePlayerStore ? gamePlayerStore.openIndex : -1,\r\n    }),\r\n)(observer(BoxGameDeskPure));\r\n","import {CSSProperties, useContext} from \"react\";\r\nimport _ from 'lodash';\r\nimport {ViewPortSizeContext} from \"./viewPortSizeHelper\";\r\n\r\nexport function useVPStyle(styles: CSSProperties) {\r\n    const { finalRatio } = useContext(ViewPortSizeContext);\r\n    const getStyleVal = (val: number) => (val ? val * finalRatio : 0);\r\n\r\n    return _.reduce(\r\n        styles,\r\n        (result: any, value: any, key: string) => {\r\n\r\n            if (value && _.isNumber(value)) {\r\n                /* eslint no-param-reassign:0 */\r\n                result[key] = getStyleVal(value);\r\n            }\r\n\r\n            return result;\r\n        },\r\n        styles,\r\n    );\r\n}\r\n","import _ from 'lodash';\r\nimport {Howl} from 'howler';\r\nimport {BoxInfo, GameRecord, HeroInfo, PositionType} from \"@web3game/typings/openBox\";\r\n\r\n\r\nexport const Sounds = {\r\n    boom: require('../statics/sounds/oh_no.mp3'),\r\n    addScore: require('../statics/sounds/add-score.mp3'),\r\n    result: require('../statics/sounds/result.wav'),\r\n};\r\n\r\nexport function playSound(soundSrc: string) {\r\n    const sound = new Howl({\r\n        src: [soundSrc],\r\n    });\r\n\r\n    sound.play();\r\n\r\n}\r\n\r\nexport function getSortedHeroList(gameRecord: GameRecord) {\r\n    const targetSelfPosition = 2;\r\n    const {currentUserId, playerAddrs, playerScores, playerAwards = []} = gameRecord;\r\n\r\n    const currentUserIdIndex = playerAddrs.indexOf(currentUserId);\r\n    const imageIndexsMap = getRandomUsersImageIndex(playerAddrs);\r\n\r\n    let resortedUserIds: string[] = [];\r\n\r\n    const posDiff = currentUserIdIndex - targetSelfPosition;\r\n\r\n    if (posDiff > 0) {\r\n        (() => {\r\n            for (let i = posDiff; i < playerAddrs.length; i++) {\r\n                resortedUserIds.push(\r\n                    playerAddrs[i],\r\n                );\r\n            }\r\n\r\n            for (let i = 0; i < posDiff; i++) {\r\n                resortedUserIds.push(playerAddrs[i]);\r\n            }\r\n        })();\r\n    } else if (posDiff < 0) {\r\n        (() => {\r\n            const startMoveIndex = playerAddrs.length + posDiff;\r\n            for (let i = startMoveIndex; i < playerAddrs.length; i++) {\r\n                resortedUserIds.push(playerAddrs[i]);\r\n            }\r\n\r\n            for (let i = 0; i < startMoveIndex; i++) {\r\n                resortedUserIds.push(playerAddrs[i]);\r\n            }\r\n        })();\r\n    } else {\r\n        resortedUserIds = _.cloneDeep(playerAddrs);\r\n    }\r\n\r\n    /** @returns {HeroInfo} */\r\n    const genOtherRecord = (pos: PositionType, sortedIndex: number): HeroInfo => {\r\n        const id = resortedUserIds[sortedIndex];\r\n        const index = playerAddrs.indexOf(id);\r\n        return {\r\n            id,\r\n            pos,\r\n            index,\r\n            isCurrentUser: false,\r\n            score: playerScores[index],\r\n            gain: playerAwards[index],\r\n            imageIndex: imageIndexsMap[id],\r\n        };\r\n    };\r\n\r\n    /** @returns {HeroInfo} */\r\n    const getCurrentRecord = (id: string): HeroInfo => {\r\n        const index = playerAddrs.indexOf(id);\r\n\r\n        return {\r\n            id,\r\n            pos: PositionType.bottom,\r\n            index,\r\n            isCurrentUser: true,\r\n            score: playerScores[index],\r\n            imageIndex: imageIndexsMap[id],\r\n            gain: playerAwards[index],\r\n        };\r\n    };\r\n\r\n    return [\r\n        genOtherRecord(PositionType.top, 0),\r\n        genOtherRecord(PositionType.right, 1),\r\n        getCurrentRecord(currentUserId),\r\n        genOtherRecord(PositionType.left, 3),\r\n    ];\r\n}\r\n\r\n\r\nexport function getSortedBoxes(gameRecord: GameRecord): BoxInfo[] {\r\n    const {scores, sequencs, playerAddrs} = gameRecord;\r\n    const sortedHeroList = getSortedHeroList(gameRecord);\r\n\r\n    return scores.map((score: number, boxIndex: number) => {\r\n\r\n        let openIndex = sequencs.indexOf(boxIndex);\r\n\r\n        if (openIndex === -1) {\r\n            openIndex = boxIndex;\r\n        }\r\n\r\n        const playerIndex = openIndex % 4;\r\n\r\n        const heroId = playerAddrs[playerIndex];\r\n\r\n        const heroInfo = _.find(sortedHeroList, hero => hero.id === heroId);\r\n\r\n        return {\r\n            boxIndex,\r\n            score,\r\n            openIndex,\r\n            heroId,\r\n            heroIndex: heroInfo ? heroInfo.index : -1,\r\n\r\n            /** @type {HeroInfo} */\r\n            heroInfo,\r\n            heroPos: heroInfo ? heroInfo.pos : '',\r\n        };\r\n    });\r\n}\r\n\r\n\r\nconst userImageIndexCache: { [name: string]: any } = {};\r\n\r\n/**\r\n * returns {Object} // { userId1: 1, userId2: 9, userId3: 3, userId4: 5}\r\n * */\r\nexport function getRandomUsersImageIndex(userIds: string[]): { [name: string]: any } {\r\n    const getRandomValue = () => _.random(1, 12);\r\n\r\n    const getRandomValueNotIn = (values: number[]) => {\r\n        let value: number;\r\n\r\n        do {\r\n            value = getRandomValue();\r\n        } while (values.indexOf(value) >= 0);\r\n\r\n        return value;\r\n    };\r\n\r\n    return _.reduce(\r\n        userIds,\r\n        (im: { [name: string]: number }, userId: string) => {\r\n            const imageIndexMap = im;\r\n\r\n            let imageIndex = userImageIndexCache[userId];\r\n            const prevImageIndexList = Object.values(imageIndexMap) as number[];\r\n\r\n            if (imageIndex === undefined || prevImageIndexList.indexOf(imageIndex) >= 0) {\r\n                imageIndex = getRandomValueNotIn(prevImageIndexList);\r\n            }\r\n\r\n            imageIndexMap[userId] = imageIndex;\r\n\r\n            userImageIndexCache[userId] = imageIndex;\r\n\r\n            return imageIndexMap;\r\n        },\r\n        {},\r\n    );\r\n}\r\n","import React from \"react\";\r\n\r\nexport enum PreferMode {\r\n    width = 'width',\r\n    height = 'height',\r\n}\r\n\r\nexport const initialSizeInfo = {\r\n    perfectHeight: 0,\r\n    perfectWidth: 0,\r\n\r\n\r\n    preferMaxWidth: 0,\r\n    preferMaxHeight: 0,\r\n\r\n    winWidth: 0,\r\n    winHeight: 0,\r\n\r\n    widthHeightRatio: 1,\r\n\r\n    adjustedWidth: 0,\r\n    adjustedHeight: 0,\r\n\r\n    finalRatio: 1,\r\n\r\n    preferMode: PreferMode.width,\r\n};\r\n\r\nexport type InitialSizeInfo = typeof initialSizeInfo;\r\n\r\nexport const ViewPortSizeContext = React.createContext(initialSizeInfo);\r\n\r\n\r\nexport const getWidthHeightRatio = (width: number, height: number) => width / height;\r\n\r\nexport const getWinSize = () => ({\r\n    winHeight: window.innerHeight,\r\n    winWidth: window.innerWidth,\r\n});\r\n\r\n\r\n\r\ntype AdjustedSizeInfoType = Partial<InitialSizeInfo> & {\r\n    preferMode?: PreferMode;\r\n};\r\n\r\nexport const getAdjustedSizeInfo = (\r\n    {\r\n        perfectHeight = 0,\r\n        perfectWidth = 0,\r\n\r\n        preferMaxHeight: _preferMaxHeight,\r\n        preferMaxWidth: _preferMaxWidth,\r\n\r\n\r\n        winWidth = 0,\r\n        winHeight = 0,\r\n        preferMode = PreferMode.width,\r\n    }: AdjustedSizeInfoType\r\n): AdjustedSizeInfoType => {\r\n    const widthHeightRatio = getWidthHeightRatio(perfectWidth, perfectHeight);\r\n    let preferMaxHeight = _preferMaxHeight || perfectHeight;\r\n    const preferMaxWidth = _preferMaxWidth || perfectWidth;\r\n\r\n    let adjustedWidth = perfectWidth;\r\n    let adjustedHeight = perfectHeight;\r\n    let resizeRatioByWidth = perfectWidth / winWidth;\r\n    let finalRatio = 1;\r\n\r\n    if (preferMode === PreferMode.width) {\r\n        if (preferMaxWidth < winWidth) {\r\n            adjustedWidth = preferMaxWidth;\r\n        } else {\r\n            adjustedWidth = winWidth;\r\n        }\r\n\r\n\r\n        resizeRatioByWidth = adjustedWidth / perfectWidth;\r\n\r\n        adjustedHeight = perfectHeight * resizeRatioByWidth;\r\n        preferMaxHeight = perfectHeight * resizeRatioByWidth;\r\n        finalRatio = resizeRatioByWidth;\r\n    }\r\n\r\n\r\n    return {\r\n        adjustedWidth,\r\n        adjustedHeight,\r\n\r\n        widthHeightRatio,\r\n\r\n        preferMaxWidth,\r\n        preferMaxHeight,\r\n\r\n        finalRatio,\r\n\r\n        preferMode,\r\n    };\r\n};\r\n","import React, {useEffect, useState} from 'react';\r\nimport _ from 'lodash';\r\nimport posed, {PoseGroup} from 'react-pose';\r\nimport {inject} from \"mobx-react\";\r\nimport {GameUIStore} from \"../../stores/GameUIStore\";\r\nimport {PopupNames} from \"../../utils/constants\";\r\n\r\ntype PopupPureProps = {\r\n    title: string;\r\n    className?: string;\r\n    onQuit?: () => void;\r\n    children: React.ReactElement | React.ReactElement[];\r\n};\r\n\r\nconst Modal = posed.div({\r\n    enter: {\r\n        y: 0,\r\n        opacity: 1,\r\n        delay: 300,\r\n        transition: {\r\n            y: { type: 'spring', stiffness: 1000, damping: 15 },\r\n            default: { duration: 300 }\r\n        }\r\n    },\r\n    exit: {\r\n        y: 50,\r\n        opacity: 0,\r\n        transition: { duration: 150 }\r\n    }\r\n});\r\n\r\nconst Backdrop = posed.div({\r\n    enter: { opacity: 0.8 },\r\n    exit: { opacity: 0 }\r\n});\r\n\r\nexport function PopupPure(\r\n    {\r\n        title,\r\n        className = '',\r\n        onQuit,\r\n        children,\r\n    }: PopupPureProps,\r\n) {\r\n    const [isVisible, setIsVisible] = useState(false);\r\n    useEffect(() => {\r\n        setIsVisible(true);\r\n    }, []);\r\n\r\n    return (\r\n        <div className={`popup ${className}`}>\r\n            <PoseGroup>\r\n                {\r\n                    isVisible && [\r\n                        (\r\n                            <Backdrop\r\n                                key=\"popupBackdrop\"\r\n                                className=\"popupBackdrop\"\r\n                                onClick={onQuit}\r\n                                onTouchEnd={onQuit}\r\n                                onKeyDown={() => undefined}\r\n                                role=\"button\"\r\n                                tabIndex={0}\r\n                                aria-label=\"click to close popup\"\r\n                            />\r\n                        ),\r\n                        (\r\n                            <Modal key=\"popupWrapper\" className=\"popupWrapper\">\r\n                                <div className=\"popupContainer\">\r\n                                    <div className=\"popupHeader\">\r\n                                        <button\r\n                                            onClick={onQuit}\r\n                                            onTouchEnd={onQuit}\r\n                                            type=\"button\"\r\n                                            className=\"popupQuitButton\"\r\n                                        >\r\n                                            Quit\r\n                                        </button>\r\n                                        <h2>{title}</h2>\r\n                                    </div>\r\n                                    <div className=\"popupBody\">\r\n                                        <div className=\"popupContent\">\r\n                                            {children}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </Modal>\r\n                        )\r\n                    ]\r\n                }\r\n            </PoseGroup>\r\n        </div>\r\n    );\r\n}\r\n\r\ntype PopupProps = { gameUIStore: GameUIStore };\r\n\r\nexport const Popup = inject(({ gameUIStore }: PopupProps, { onQuit }) => ({\r\n    onQuit: _.debounce(() => {\r\n        if (onQuit) {\r\n            onQuit();\r\n        }\r\n\r\n        gameUIStore.setVisiblePopup(PopupNames.none);\r\n    }, 50),\r\n}))(PopupPure);\r\n","import React, {CSSProperties} from 'react';\r\n\r\nexport type TableProps = {\r\n    children?: React.ReactElement | React.ReactElement[] | null;\r\n    tHead?: React.ReactElement | React.ReactElement[];\r\n    className?: string;\r\n    bodyClassName?: string;\r\n    style?: CSSProperties;\r\n};\r\n\r\n\r\nexport function Table(\r\n    {\r\n        tHead,\r\n        children,\r\n        className = \"\",\r\n        bodyClassName = \"\",\r\n        style,\r\n    }: TableProps\r\n) {\r\n    return (\r\n        <table className={className} style={style}>\r\n            <thead>{tHead}</thead>\r\n            <tbody className={bodyClassName}>{children}</tbody>\r\n        </table>\r\n    );\r\n}\r\n"],"sourceRoot":""}