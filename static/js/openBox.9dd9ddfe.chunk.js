(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{100:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(52);function i(e){var t=e.onShowHistory,n=Object(o.a)({paddingTop:16,fontSize:28,width:280,height:120});return a.a.createElement("button",{className:"gameHistoryButton",onClick:t,type:"button",style:n},"\u6295\u6ce8\u8bb0\u5f55")}a.a.memo(i);var c=n(27),u=n(73);function s(e){var t=e.onQuitPlayer,n=e.onQuitGame,r=e.isPlayerActive?t:n;if(!r)return null;var i=Object(o.a)({paddingTop:16,fontSize:28,width:280,height:120});return a.a.createElement("button",{className:"gameQuitButton",onClick:r,type:"button",style:i},"\u8fd4\u56de")}s.defaultProps={isPlayerActive:!1};var l=Object(c.b)(function(e){var t=e.gameUIStore;return{isPlayerActive:t&&t.scene===u.a.gamePlayer}})(s),p=n(324),m=n(32);var d=Object(c.b)(function(e,t){var n=e.gameUIStore,r=t.name;return{isActive:n.visiblePopup===r}})(function(e){var t=e.isActive,n=e.children;return t?n():null}),f=a.a.createContext({});function O(e){var t=e.popups,n=function(e){var t=Object(r.useState)(e),n=Object(m.a)(t,2),a=n[0],o=n[1];return{popups:a,showPopup:function(e){o([].concat(Object(p.a)(a),[e]))},closePopup:function(e){o(a.filter(function(t){return t.name!==e}))}}}(void 0===t?[]:t),o=n.showPopup,i=n.popups;return a.a.createElement(f.Provider,{value:{showPopup:o}},a.a.createElement(r.Fragment,null,i.map(function(e){var t=e.name,n=e.renderer;return a.a.createElement(d,{key:t,name:t},n)})))}var E=n(92),b=n(305),h=n.n(b);function y(e){var t=e.children,n=e.onShowHistory,c=e.popups,u=void 0===c?[]:c,s=e.onQuitGame,p=e.onQuitPlayer,m=Object(r.useContext)(E.b),d=m.adjustedHeight,f={width:m.adjustedWidth,height:d},b=Object(o.a)({paddingTop:460});return a.a.createElement("div",{className:"gameApplication",style:f},a.a.createElement("img",{src:h.a,alt:"background",className:"backgroundImage"}),a.a.createElement(i,{onShowHistory:n}),a.a.createElement(l,{onQuitGame:s,onQuitPlayer:p}),a.a.createElement("div",{className:"gameDesktop"},a.a.createElement("div",{className:"gameDesktopContent",style:b},t)),a.a.createElement(O,{popups:u}))}a.a.memo(y);var T=n(126),v=n.n(T),N=n(93),_=n(94);var A=Object(c.b)(function(e){var t=e.historyStore;return{displayList:t?t.displayList:[]}})(function(e){var t=e.onPlayGame,n=e.displayList,r=a.a.createElement("tr",null,a.a.createElement("th",{className:"historyNo"},"\u671f\u53f7"),a.a.createElement("th",null,"\u91d1\u989d"),a.a.createElement("th",{className:"historyDate"},"\u65e5\u671f"),a.a.createElement("th",{className:"historyAction"}," ")),o=a.a.useCallback(function(e){return a.a.createElement("tr",{key:e.id},a.a.createElement("td",{className:"historyNo"},e.issueNo),a.a.createElement("td",null,e.money),a.a.createElement("td",{className:"historyDate"},v()(e.betTime).format("MM/DD HH:mm")),a.a.createElement("td",{className:"historyAction"},a.a.createElement("button",{className:"historyActionButton",onClick:function(){return t(e)},type:"button"})))},[]),i=n?n.map(o):null;return a.a.createElement(N.a,{title:"\u6295\u6ce8\u8bb0\u5f55"},a.a.createElement(_.a,{tHead:r,className:"historyList",bodyClassName:"purchaseListTbody"},i))});var g=a.a.memo(function(e){var t=e.moneyList,n=e.onSelect,r=Object(o.a)({width:180,height:90,fontSize:24});return a.a.createElement("div",{className:"moneySelector"},t.map(function(e){var t=e.money,o=e.text;return a.a.createElement("div",{key:t},a.a.createElement("button",{type:"button",className:"moneySelectorButton moneySelectorButton_".concat(t),style:r,onClick:function(){return n(t)}},o))}))}),I=n(127);var R=Object(c.b)(function(e,t){var n=e.gameUIStore,r=t.name;return{isActive:n.scene===r}})(function(e){var t=e.isActive,n=e.children;return t?n():null});n.d(t,"a",function(){return y}),n.d(t,"b",function(){return A}),n.d(t,"c",function(){return g}),n.d(t,"d",function(){return I.a}),n.d(t,"e",function(){return R})},127:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return m});var r=n(32),a=n(0),o=n.n(a),i=n(16),c=n.n(i),u=n(128),s=n(130),l=n(52),p=n(17);var m=Object(p.a)(e)(function(e){var t=e.imageIndex,n=e.isActive,i=void 0!==n&&n,p=e.score,m=e.pos,d=Object(a.useState)(!1),f=Object(r.a)(d,2),O=f[0],E=f[1];Object(a.useEffect)(function(){E(!0)},[]);var b=Object(l.a)({width:100,height:100}),h=Object(l.a)({width:55,height:63,fontSize:24,top:-70,left:24,paddingTop:16}),y=function(e){switch(e){case u.a.top:return Object(l.a)({top:200,left:340});case u.a.right:return Object(l.a)({top:660,left:620});case u.a.bottom:return Object(l.a)({top:1120,left:340});case u.a.left:return Object(l.a)({top:660,left:60})}return{}}(m),T=null!==p?o.a.createElement("span",{className:"userScore",style:h},p):null,v=s.b.div({enter:y,active:function(e,t){var n=c.a.clone(t);switch(m){case u.a.top:n.top+=50;break;case u.a.right:n.left-=50;break;case u.a.bottom:n.top-=50;break;case u.a.left:n.left+=50}return n}(0,y),inActive:y}),N="playerInfo userImage userImage".concat(t," ").concat(m," ").concat(i?"active":"");return o.a.createElement(s.a,null,O&&o.a.createElement(v,{key:"player",pose:i?"active":"inActive",className:N,style:b},T))})}).call(this,n(18)(e))},128:function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e.top="top",e.bottom="bottom",e.left="left",e.right="right"}(r||(r={}))},129:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"d",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return i});var r=1e3,a=1500,o=650,i={closed:"closed",opened:"opened",opening:"opening"}},14:function(e,t,n){"use strict";var r=n(28),a=n.n(r),o={APP_TITLE:"APP",HOME:"Home",SHOPS:"Shops",MY:"My",GAME:"Game",GAME_IS_NOT_READY:"Game is not ready. Please wait a moment.",RANK:"Rank",LANGUAGE_SETTING:"Language Settings",BACK:"Back",TT_BALANCE:"TT Balance",TOKEN_BALANCE:"Token Balance",BUY_NOW:"Buy Now",OTHER:"Other",HOME_PAGE:{ASSET_MANAGEMENT:"Asset Management",RECEIVE:"Receive",TRANSFER:"Transfer",ANNOUNCEMENT:"Announcement",BALANCE:"Balance",TOTAL_EARNINGS:"Total Earnings",TRANSFER_ACCOUNT:"Account",TRANSFER_FROM:"From",TRANSFER_TO:"To",TRANSFER_AMOUNT:"Amount",PRODUCT_NAME_0:"Task I",PRODUCT_NAME_1:"Task II",PRODUCT_NAME_2:"Task III",PRODUCT_NAME_3:"Task IV",PRODUCT_CTC_VALUE:"TTI Value",PRODUCT_BENEFIT:"Benefit",PRODUCT_PURCHASE_LIMITATION:"Purchase Limited",PRODUCT_USE_TIMES:"Available Use Times",PRODUCT_IS_ALLOW_PURCHASE:"Is Allow Purchase",PRODUCT_REMAIN_USE_TIMES:"Remain Use Times",PRODUCT_LATEST_GAIN:"Latest Gain",PRODUCT_VALUE:"Value (TTI)",PRODUCT_EARNING:"Earnings (TTI)",PRODUCT_TODAY_EARNING:"Earnings (TTI)",PRODUCT_TOTAL_EARNING:"Total Earning",INVITATION:"Invitation",ABOUT_US:"About US",ABOUT_US_CONTENT:"About US Content",SYSTEM_ANNOUNCEMENT:"System Announcement",MY_EARNING:"My Earning",TRADING_LOG:"Trading Log",TODAY_TOTAL_IN_COME:"total income:",THIS_QUOTER_AVAILABLE_BONUS:"Total Bonus of Quoters:",AVAILABLE_TIMES:" times available",EARNING_TIMES:" times",LATEST_GAIN:"latest:",STATIC_PROFIT_OF_ONE_TIME:"one time ",STATIC_PROFIT_TODAY:"today ",RELEASE_SCROLL:"RANSOM",RENEW_SCROLL:"RENEW",TASK:"Task",MY_INVITOR:"My Invitor",MY_INVITATION_CODE:"My Invitation Code:",MY_GROUP:"My Group",SET_INVITOR:"Set Invitor",QUARTER:"Quarter ",AVAILABLE_QUARTER_REWARD:"available reward ",STRAIT_REFERER_RANK:"Strait Referer Rank",GAME_PLAY_RANK:"Game Play Rank",MY_PERFORMANCE:"My Performance: ",RANK_ACCOUNT:"Account",RANK_AMOUNT:"Amount"},GAIN:"Gain",MY_TASK:{MY_TASK_TITLE:"My Task"},OPEN_BOX_PAGE:{OPEN_BOX:"Open Box",OPEN_BOX_MONEY_TEXT_1:"10",OPEN_BOX_MONEY_TEXT_2:"2000",OPEN_BOX_MONEY_TEXT_3:"5000",OPEN_BOX_MONEY_TEXT_4:"10000",OPEN_BOX_MONEY_TEXT_5:"50000"}},i=n(29);function c(){return new Proxy(o,{get:function(e,t){return a.a.t(t)||e[t]}})}a.a.fallbacks=!0,a.a.translations={en:o,zh:{APP_TITLE:"\u5e94\u7528\u6807\u9898",HOME:"\u9996\u9875",SHOPS:"\u5546\u57ce",MY:"\u6211\u7684",GAME:"\u6e38\u620f",GAME_IS_NOT_READY:"\u6e38\u620f\u5c1a\u672a\u5f00\u59cb\uff0c\u8bf7\u7a0d\u540e.",RANK:"\u6392\u884c",LANGUAGE_SETTING:"\u8bbe\u7f6e\u8bed\u8a00",BACK:"\u8fd4\u56de",TT_BALANCE:"TT \u4f59\u989d",TOKEN_BALANCE:"TTI \u4f59\u989d",BUY_NOW:"\u7acb\u5373\u8d2d\u4e70",OTHER:"\u5176\u4ed6",HOME_PAGE:{ASSET_MANAGEMENT:"\u8d44\u4ea7\u7ba1\u7406",RECEIVE:"\u63a5\u6536",TRANSFER:"\u8f6c\u8d26",ANNOUNCEMENT:"\u516c\u5171",BALANCE:"\u4f59\u989d",TOTAL_EARNINGS:"\u603b\u6536\u76ca",TRANSFER_ACCOUNT:"\u8d26\u6237",TRANSFER_FROM:"\u4ece",TRANSFER_TO:"\u8f6c\u7ed9",TRANSFER_AMOUNT:"\u91d1\u989d",PRODUCT_NAME_0:"\u4efb\u52a1 I",PRODUCT_NAME_1:"\u4efb\u52a1 II",PRODUCT_NAME_2:"\u4efb\u52a1 III",PRODUCT_NAME_3:"\u4efb\u52a1 IV",PRODUCT_BENEFIT:"\u4efb\u52a1\u6536\u76ca",PRODUCT_CTC_VALUE:"\u4efb\u52a1\u4ef7\u503c(TTI)",PRODUCT_IS_ALLOW_PURCHASE:"\u5141\u8bb8\u8d2d\u4e70",PRODUCT_PURCHASE_LIMITATION:"\u4efb\u52a1\u9650\u5236\u8d2d\u4e70",PRODUCT_USE_TIMES:"\u53ef\u7528\u6b21\u6570",PRODUCT_REMAIN_USE_TIMES:"\u5269\u4f59\u4f7f\u7528\u6b21\u6570",PRODUCT_LATEST_GAIN:"\u9886\u53d6\u65e5\u671f",PRODUCT_VALUE:"\u4efb\u52a1\u4ef7\u503c (TTI)",PRODUCT_EARNING:"\u4efb\u52a1\u4ea7\u751f\u6536\u76ca (TTI)",PRODUCT_TODAY_EARNING:"\u4eca\u65e5\u53ef\u9886\u53d6\u6536\u76ca (TTI)",PRODUCT_TOTAL_EARNING:"\u603b\u6536\u76ca",INVITATION:"\u9080\u8bf7",ABOUT_US:"\u5173\u4e8e\u6211\u4eec",ABOUT_US_CONTENT:"\u5173\u4e8e\u6211\u4eec\u7684\u8be6\u60c5",SYSTEM_ANNOUNCEMENT:"\u7cfb\u7edf\u516c\u544a",MY_EARNING:"\u6211\u7684\u6536\u76ca",TRADING_LOG:"\u4ea4\u6613\u65e5\u5fd7",TODAY_TOTAL_IN_COME:"\u603b\u6536\u76ca:",THIS_QUOTER_AVAILABLE_BONUS:"\u603b\u5b63\u5ea6\u5956:",AVAILABLE_TIMES:" \u6b21\u53ef\u7528",EARNING_TIMES:" \u6b21",LATEST_GAIN:"\u6700\u8fd1\u9886\u53d6:",STATIC_PROFIT_OF_ONE_TIME:"\u6bcf\u6b21\u6536\u76ca ",STATIC_PROFIT_TODAY:"\u4eca\u65e5\u6536\u76ca ",RELEASE_SCROLL:"\u8d4e\u56de",RENEW_SCROLL:"\u7eed\u7ea6",TASK:"\u4efb\u52a1",MY_INVITOR:"\u6211\u7684\u9080\u8bf7\u4eba:",MY_INVITATION_CODE:"\u6211\u7684\u9080\u8bf7\u7801:",MY_GROUP:"\u6211\u7684\u56e2\u961f",SET_INVITOR:"\u8bbe\u7f6e\u9080\u8bf7\u4eba",QUARTER:"\u5b63\u5ea6 ",AVAILABLE_QUARTER_REWARD:"\u6709\u6548\u5956\u52b1 ",STRAIT_REFERER_RANK:"\u76f4\u63a8\u4e1a\u7ee9\u699c\u5355",GAME_PLAY_RANK:"\u6e38\u620f\u6295\u6ce8\u699c\u5355",MY_PERFORMANCE:"\u6211\u7684\u4e1a\u7ee9: ",RANK_ACCOUNT:"\u8d26\u53f7",RANK_AMOUNT:"\u91d1\u989d"},GAIN:"\u9886\u53d6",MY_TASK:{MY_TASK_TITLE:"\u6211\u7684\u4efb\u52a1"},OPEN_BOX_PAGE:{OPEN_BOX:"\u5f00\u7bb1\u5b50",OPEN_BOX_MONEY_TEXT_1:"10",OPEN_BOX_MONEY_TEXT_2:"2000",OPEN_BOX_MONEY_TEXT_3:"5000",OPEN_BOX_MONEY_TEXT_4:"10000",OPEN_BOX_MONEY_TEXT_5:"50000"}}},Object(i.c)(Object(i.a)()),n.d(t,"a",function(){return c})},17:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(16),a=n.n(r),o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return a.a.reverse(t).reduce(function(e,t){return t(e)},e)}}},22:function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(2),i=n(16),c=n.n(i),u=n(26),s={back:"back",push:"push"},l=new u.b;n.d(t,"b",function(){return f}),n.d(t,"a",function(){return E});var p=[],m="|";function d(e){var t=document.location.hash;document.location.hash="".concat(t).concat(t?m:"").concat(e)}function f(e,t){return O.apply(this,arguments)}function O(){return(O=Object(o.a)(a.a.mark(function e(t,n){var r,o,i=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},d(o=n.key),p.push({navigator:t,router:n,options:r,routerName:o}),e.next=6,t.pushPage(n,r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function E(){window.history.back()}window.addEventListener("hashchange",function(e){var t=e.newURL,n=e.oldURL;if(t.length<n.length){var r=n.replace(t,"").replace("#","");!function(e){l.emit(s.back,e)}(r),function(e){var t=c.a.last(p),n=t.navigator,r=t.routerName;p.pop(),r===e&&n.popPage()}(r)}}),window.location.hash&&window.history.replaceState(null,"","#")},26:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(37),a=n(34),o=n(31),i=n(47),c=n(33),u=n(21),s=n(23),l=n(44),p=function(){function e(){Object(u.a)(this,e),this.collection=[]}return Object(s.a)(e,[{key:"push",value:function(){var e;return(e=this.collection).push.apply(e,arguments),this}},{key:"removeAll",value:function(){this.collection.forEach(function(e){return e()}),this.collection=[]}},{key:"getCollection",value:function(){return this.collection}}]),e}(),m=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(a.a)(this,Object(o.a)(t).call(this))).EventKeys={},n.removeEventListeners=[],n.EventKeys=Object(r.a)({},e),n.setMaxListeners(9999),n}return Object(c.a)(t,e),Object(s.a)(t,[{key:"on",value:function(e,n){var r=this;Object(i.a)(Object(o.a)(t.prototype),"on",this).call(this,e,n);var a=function t(){r.removeListener(e,n),r.removeEventListeners=r.removeEventListeners.filter(function(e){return e!==t})};return a.eventName=e,this.removeEventListeners||(this.removeEventListeners=[]),this.removeEventListeners.push(a),a}},{key:"one",value:function(e,t){var n=this.on(e,function(){t.apply(void 0,arguments),n()});return n}},{key:"removeByName",value:function(e){this.removeEventListeners.forEach(function(t){t.eventName===e&&t()}),this.removeEventListeners=this.removeEventListeners.filter(function(t){return t.eventName!==e})}},{key:"removeAll",value:function(){this.removeEventListeners.forEach(function(e){return e()}),this.removeEventListeners=[]}},{key:"createCollection",value:function(){return new p}},{key:"listenToMany",value:function(){var e,t=this.createCollection();return(e=t.getCollection()).push.apply(e,arguments),function(){return t.removeAll()}}}]),t}(l.EventEmitter);t.b=m},29:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return c}),n.d(t,"b",function(){return u});var r=n(28),a=n.n(r),o="locale";function i(e){a.a.locale=e,localStorage.setItem(o,e)}function c(){return localStorage.getItem(o)||window.navigator.language||"en"}function u(){return[{locale:"en",text:"English"},{locale:"zh",text:"\u4e2d\u6587"}]}},304:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"OpenBoxGame",function(){return C});var r=n(1),a=n.n(r),o=n(2),i=n(37),c=n(0),u=n.n(c),s=n(19),l=n(16),p=n.n(l),m=n(27),d=n(100),f=n(131),O=n(73),E=n(22),b=n(306),h=n(61),y=n(307),T=(n(308),n(309)),v=n(325),N=(n(314),n(315)),_=n(326),A=n(316);window.OpenBoxStores=Object(i.a)({},v,f);var g=v.gamePlayerStore,I=f.gameUIStore,R=f.accountStore,P=function(){I.setVisiblePopup(O.b.history)},j=function(e){Object(o.a)(a.a.mark(function t(){var n,r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(y.a)();case 2:return n=t.sent,t.next=5,n.loadGame(e);case 5:r=t.sent,I.setVisiblePopup(O.b.none),I.setScene(O.a.gamePlayer),g.startGame(r),g.onGameEnd(function(){return I.setVisiblePopup(O.b.gameResult)});case 10:case"end":return t.stop()}},t)}))()},S=function(){g.quit(),I.setScene(O.a.moneySelector)},x=function(){I.setVisiblePopup(O.b.none),I.setScene(O.a.moneySelector),g.quit()},w=function(e){Object(o.a)(a.a.mark(function t(){var n,r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(h.a)();case 2:return n=t.sent,r=n.submitGame,t.prev=4,t.next=7,r(Object(i.a)({},e,{betType:3,issueNo:0,nums:[],amounts:[],betAddress:g.betAddress}));case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(4),alert(t.t0);case 12:I.setVisiblePopup(O.b.none);case 13:case"end":return t.stop()}},t,null,[[4,9]])}))()},B=function(e){I.setVisiblePopup(O.b.authForm,{money:e})},M=function(e,t){return p.a.map(e,function(e){return Object(i.a)({},e,{currentUserId:t,id:e.id||p.a.random(0)})})};function C(){Object(c.useEffect)(function(){return Object(o.a)(a.a.mark(function e(){var t,n,r,o,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.a)();case 2:return t=e.sent,n=t.getHistoryList,r=t.getBetAddress,e.next=7,n();case 7:return o=e.sent,v.historyStore.setDisplayList(M(o,R.account)),e.next=11,r();case 11:i=e.sent,g.setBetAddress(i);case 13:case"end":return e.stop()}},e)}))(),function(){g.quit()}});var e=[{name:O.b.history,renderer:function(){return u.a.createElement(d.b,{onPlayGame:j})}},{name:O.b.authForm,renderer:function(){return u.a.createElement(b.a,{onSubmit:w})}},{name:O.b.gameResult,renderer:function(){return u.a.createElement(N.a,{onQuit:x})}}],t=Object(c.useCallback)(function(){return Object(E.a)()},[]);return u.a.createElement(s.Page,{className:"openBoxGamePage"},u.a.createElement(T.a,{perfectHeight:1344,perfectWidth:750,preferMaxWidth:600},u.a.createElement(m.a,Object.assign({},f,v),u.a.createElement(d.a,{onShowHistory:P,onQuitGame:t,onQuitPlayer:S,popups:e},u.a.createElement(d.e,{name:O.a.moneySelector},function(){return u.a.createElement(d.c,{moneyList:Object(A.a)(),onSelect:B})}),u.a.createElement(d.e,{name:O.a.gamePlayer},function(){return u.a.createElement(_.a,null)})))))}t.default=e(u.a.memo(C))}.call(this,n(18)(e))},305:function(e,t,n){e.exports=n.p+"static/media/beijingtu.03f0d956.png"},306:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),a=n.n(r),o=n(27),i=n(93);var c=Object(o.b)(function(e){var t=e.accountStore,n=e.gameUIStore;if(!t||!n)return{};var r=n.popupData.money;return{account:t.account,ttBalance:t.ttBalance,tokenBalance:t.tokenBalance,gas:t.gas,money:r}})(function(e){var t=e.onSubmit,n=e.account,o=e.ttBalance,c=e.tokenBalance,u=e.money,s=void 0===u?0:u,l=Object(r.useCallback)(function(){t({account:n,money:s})},[]);return a.a.createElement(i.a,{title:"\u786e\u8ba4\u63d0\u4ea4",className:"gameAuthFormPopup"},a.a.createElement("div",{className:"gameAuthForm"},a.a.createElement("div",{className:"gameAuthFormField"},"\u8d26\u53f7\xa0:\xa0",n),a.a.createElement("div",{className:"gameAuthFormField"},"TT\u4f59\u989d\xa0:\xa0",o),a.a.createElement("div",{className:"gameAuthFormField"},"TOKEN\u4f59\u989d\xa0:\xa0",c),a.a.createElement("hr",null),a.a.createElement("div",{className:"gameAuthFormField",style:{marginTop:"20px"}},a.a.createElement("button",{type:"submit",onClick:l},"\u63d0\u4ea4"))))})},307:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(1),a=n.n(r),o=n(2),i=n(62);function c(){return u.apply(this,arguments)}function u(){return(u=Object(o.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(i.a)()){e.next=2;break}return e.abrupt("return",n.e(25).then(n.bind(null,322)).then(function(e){return e.default}));case 2:return e.abrupt("return",Promise.all([n.e(1),n.e(21)]).then(n.bind(null,327)).then(function(e){return e.default}));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}},308:function(e,t,n){},309:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(37),a=n(32),o=n(0),i=n.n(o),c=n(16),u=n.n(c),s=n(92),l=i.a.memo(function(e){var t=e.preferMode,n=void 0===t?s.a.width:t,c=e.perfectHeight,l=e.perfectWidth,p=(e.preferMaxHeight,e.preferMaxWidth),m=void 0===p?900:p,d=e.children,f=Object(o.useState)(Object(s.d)()),O=Object(a.a)(f,2),E=O[0],b=E.winHeight,h=E.winWidth,y=O[1];Object(o.useEffect)(function(){window.addEventListener("resize",function(){y(Object(s.d)())})},[]);var T=s.b.Provider,v={winHeight:b,winWidth:h,perfectHeight:c,perfectWidth:l,preferMaxWidth:m},N=Object(s.c)(Object(r.a)({},v,{preferMode:n})),_=u.a.extend({},v,N);return i.a.createElement(T,{value:_},d)})},311:function(e,t,n){e.exports=n.p+"static/media/oh_no.4b9dfc8c.mp3"},312:function(e,t,n){e.exports=n.p+"static/media/add-score.e14110a0.mp3"},313:function(e,t,n){e.exports=n.p+"static/media/result.e786a7c7.wav"},314:function(e,t,n){},315:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(0),a=n.n(r),o=n(27),i=n(93),c=n(94),u=n(100),s=n(80),l=function(e){return e&&e.toNumber?e.toNumber():e};var p=Object(o.b)(function(e){var t=e.gamePlayerStore,n=e.web3;return{gameRecord:t?t.gameRecord:null,web3:n}})(function(e){var t=e.onQuit,n=e.gameRecord,r=e.web3;if(!r)return null;var o=n?Object(s.c)(n).sort(function(e,t){return e.score&&t.score&&e.score.comparedTo&&t.score.comparedTo?t.score.comparedTo(e.score):e-t}):[],p=a.a.createElement("tr",null,a.a.createElement("th",{className:"rankIcon"}," "),a.a.createElement("th",{className:"playerIcon"}," "),a.a.createElement("th",{className:"playerName"},"\u73a9\u5bb6"),a.a.createElement("th",{className:"payerScore"},"\u94bb\u77f3"),a.a.createElement("th",{className:"payerAward"},"\u5956\u52b1"));return a.a.createElement(i.a,{title:"\u6392\u884c",onQuit:t,className:"gameResultPopup"},a.a.createElement(c.a,{tHead:p,className:"gameResult"},o.map(function(e,t){return a.a.createElement("tr",{key:e.id},a.a.createElement("td",{className:"rankIcon"},a.a.createElement("div",{className:"rankImage rankImage".concat(t+1)},t)),a.a.createElement("td",{className:"playerIcon"},a.a.createElement(u.d,{id:e.id,imageIndex:e.imageIndex})),a.a.createElement("td",{className:"playerName"},e.id.slice(-6)),a.a.createElement("td",{className:"payerScore"},l(e.score)),a.a.createElement("td",{className:"payerAward"},r.fromWei(l(e.gain),"ether")))})))})},316:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(14),a=function(){return[{money:10,text:Object(r.a)().OPEN_BOX_PAGE.OPEN_BOX_MONEY_TEXT_1},{money:2e3,text:Object(r.a)().OPEN_BOX_PAGE.OPEN_BOX_MONEY_TEXT_2},{money:5e3,text:Object(r.a)().OPEN_BOX_PAGE.OPEN_BOX_MONEY_TEXT_3},{money:1e4,text:Object(r.a)().OPEN_BOX_PAGE.OPEN_BOX_MONEY_TEXT_4},{money:5e4,text:Object(r.a)().OPEN_BOX_PAGE.OPEN_BOX_MONEY_TEXT_5}]}},325:function(e,t,n){"use strict";n.r(t);var r,a,o,i,c,u,s,l,p,m,d,f,O,E,b=n(64),h=n(21),y=n(23),T=n(65),v=(n(66),n(48)),N=new(r=function(){function e(){Object(h.a)(this,e),Object(b.a)(this,"displayList",a,this)}return Object(y.a)(e,[{key:"setDisplayList",value:function(e){this.displayList=e}}]),e}(),a=Object(T.a)(r.prototype,"displayList",[v.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(T.a)(r.prototype,"setDisplayList",[v.b],Object.getOwnPropertyDescriptor(r.prototype,"setDisplayList"),r.prototype),r),_=n(34),A=n(31),g=n(81),I=n(33),R=n(16),P=n(26),j=n(129),S=n(80),x="ON_GAME_NOT_READY",w=new(function(e){function t(){var e,n;Object(h.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(_.a)(this,(e=Object(A.a)(t)).call.apply(e,[this].concat(a)))).onGameReadyStatusChange=function(e){return n.on(x,e)},n.triggerGameReadyStatus=function(e){return n.emit(x,e)},n}return Object(I.a)(t,e),t}(P.a))({}),B=new(o=function(e){function t(){var e,n;Object(h.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(_.a)(this,(e=Object(A.a)(t)).call.apply(e,[this].concat(a)))).EventKeys={start:"start",end:"end",pause:"pause",resume:"resume",beginOpenBox:"beginOpenBox",finishOpenBox:"finishOpenBox"},Object(b.a)(n,"betAddress",i,Object(g.a)(n)),Object(b.a)(n,"gameRecord",c,Object(g.a)(n)),Object(b.a)(n,"openIndex",u,Object(g.a)(n)),Object(b.a)(n,"finishedOpenIndex",s,Object(g.a)(n)),Object(b.a)(n,"openingBox",l,Object(g.a)(n)),Object(b.a)(n,"isPaused",p,Object(g.a)(n)),n.playerTimeout=0,Object(b.a)(n,"playerScores",m,Object(g.a)(n)),Object(b.a)(n,"boomedHeroId",d,Object(g.a)(n)),Object(b.a)(n,"fasterTimes",f,Object(g.a)(n)),Object(b.a)(n,"pause",O,Object(g.a)(n)),Object(b.a)(n,"resume",E,Object(g.a)(n)),n}return Object(I.a)(t,e),Object(y.a)(t,[{key:"setBetAddress",value:function(e){this.betAddress=e}},{key:"startGame",value:function(e){var t=this;return this.resetPlayer(),e?(!1===e.play?(this.isPaused=!0,w.triggerGameReadyStatus(!1)):w.triggerGameReadyStatus(!0),this.gameRecord=e,this.emit(this.EventKeys.start),Promise.resolve(this.playBoxByIndex(0)).then(function(e){e&&!t.isPaused&&(t.emit(t.EventKeys.end),Object(S.d)(S.a.result))})):Promise.resolve()}},{key:"restartGame",value:function(){this.gameRecord&&this.startGame(this.gameRecord)}},{key:"clearPlayerTimeout",value:function(){this.playerTimeout&&(clearTimeout(this.playerTimeout),this.playerTimeout=0)}},{key:"playBoxByIndex",value:function(e){var t=this;if(!this.gameRecord)return!1;this.openIndex=e,this.openingBox=null;var n=Object(S.b)(this.gameRecord);return e<n.length&&e>=0?this.waitTimeout(Object(v.b)("onPrepareBox",function(){var r,a=(r=e,R.find(n,function(e){return e.openIndex===r}));return t.openingBox=a,t.emit(t.EventKeys.beginOpenBox,e,a),t.waitTimeout(Object(v.b)("onBoxOpen",function(){if(t.isPaused)return!1;if(t.finishedOpenIndex=e,t.emit(t.EventKeys.finishOpenBox,e,a),a){var n=a.heroPos;if(0===a.score)t.playerScores[n]=0,t.boomedHeroId=a.heroId,Object(S.d)(S.a.boom);else{Object(S.d)(S.a.addScore);var r=t.playerScores[n];t.playerScores[n]=r+a.score,t.boomedHeroId=null}}return t.waitTimeout(function(){return t.playBoxByIndex(e+1)},j.c)}),j.b)}),j.d):(this.openIndex=-1,this.openingBox=null,!0)}},{key:"clearBoomer",value:function(){this.boomedHeroId=null}},{key:"waitTimeout",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.c;return new Promise(function(r){t.playerTimeout=setTimeout(function(){return r(e())},n*t.fasterTimes)})}},{key:"toggleFaster",value:function(){1===this.fasterTimes?this.fasterTimes=.2:this.fasterTimes=1}},{key:"resetPlayer",value:function(){this.fasterTimes=1,this.gameRecord=null,this.openingBox=null,this.openIndex=-1,this.finishedOpenIndex=-1,this.isPaused=!1,this.boomedHeroId=null,this.playerScores={top:0,right:0,bottom:0,left:0},this.clearPlayerTimeout()}},{key:"quit",value:function(){this.resetPlayer(),this.removeAll()}},{key:"onBeginOpenBox",value:function(e){return this.on(this.EventKeys.beginOpenBox,e)}},{key:"onFinishOpenBox",value:function(e){return this.on(this.EventKeys.finishOpenBox,e)}},{key:"onStart",value:function(e){return this.on(this.EventKeys.start,e)}},{key:"onGameEnd",value:function(e){return this.on(this.EventKeys.end,e)}},{key:"onPause",value:function(e){return this.on(this.EventKeys.pause,e)}},{key:"onResume",value:function(e){return this.on(this.EventKeys.resume,e)}}]),t}(P.a),i=Object(T.a)(o.prototype,"betAddress",[v.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(T.a)(o.prototype,"setBetAddress",[v.b],Object.getOwnPropertyDescriptor(o.prototype,"setBetAddress"),o.prototype),c=Object(T.a)(o.prototype,"gameRecord",[v.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=Object(T.a)(o.prototype,"openIndex",[v.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),s=Object(T.a)(o.prototype,"finishedOpenIndex",[v.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),l=Object(T.a)(o.prototype,"openingBox",[v.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=Object(T.a)(o.prototype,"isPaused",[v.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=Object(T.a)(o.prototype,"playerScores",[v.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{top:0,right:0,bottom:0,left:0}}}),d=Object(T.a)(o.prototype,"boomedHeroId",[v.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=Object(T.a)(o.prototype,"fasterTimes",[v.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Object(T.a)(o.prototype,"startGame",[v.b],Object.getOwnPropertyDescriptor(o.prototype,"startGame"),o.prototype),Object(T.a)(o.prototype,"restartGame",[v.b],Object.getOwnPropertyDescriptor(o.prototype,"restartGame"),o.prototype),Object(T.a)(o.prototype,"clearPlayerTimeout",[v.b],Object.getOwnPropertyDescriptor(o.prototype,"clearPlayerTimeout"),o.prototype),Object(T.a)(o.prototype,"playBoxByIndex",[v.b],Object.getOwnPropertyDescriptor(o.prototype,"playBoxByIndex"),o.prototype),Object(T.a)(o.prototype,"clearBoomer",[v.b],Object.getOwnPropertyDescriptor(o.prototype,"clearBoomer"),o.prototype),Object(T.a)(o.prototype,"toggleFaster",[v.b],Object.getOwnPropertyDescriptor(o.prototype,"toggleFaster"),o.prototype),O=Object(T.a)(o.prototype,"pause",[v.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.isPaused=!0,e.clearPlayerTimeout()}}}),E=Object(T.a)(o.prototype,"resume",[v.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.isPaused=!1,e.playBoxByIndex(e.openIndex)}}}),Object(T.a)(o.prototype,"resetPlayer",[v.b],Object.getOwnPropertyDescriptor(o.prototype,"resetPlayer"),o.prototype),Object(T.a)(o.prototype,"quit",[v.b],Object.getOwnPropertyDescriptor(o.prototype,"quit"),o.prototype),o);n.d(t,"historyStore",function(){return N}),n.d(t,"gamePlayerStore",function(){return B})},326:function(e,t,n){"use strict";var r,a,o,i=n(0),c=n.n(i),u=n(27),s=n(100),l=n(80),p=n(16),m=n.n(p),d=n(94),f=n(14),O=n(52),E=n(21),b=n(23),h=n(34),y=n(31),T=n(33),v=n(88),N=n(129),_=Object(v.a)({},N.a.opening,"animated swing active"),A=Object(u.b)(function(e){return{gamePlayerStore:e.gamePlayerStore}})(r=Object(u.c)((o=a=function(e){function t(){var e,n;Object(E.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(a)))).isBoxOpened=function(){var e=n.props,t=e.openIndex,r=e.gamePlayerStore;return!!r&&t<=r.finishedOpenIndex},n}return Object(T.a)(t,e),Object(b.a)(t,[{key:"getStatus",value:function(){var e=this.props,t=e.boxIndex,n=e.gamePlayerStore,r=this.isBoxOpened(),a=n&&n.openingBox&&n.openingBox.boxIndex===t;return r?N.a.opened:a?N.a.opening:N.a.closed}},{key:"getAnimatedClassByStatus",value:function(e){var t=this.props.gamePlayerStore;return!t||t.isPaused?"":_[e]||""}},{key:"render",value:function(){var e=this.props,t=e.score,n=e.boxCover,r=0===t,a=this.getStatus(),o=r?"boom":"",i=t>=5?"largerThen5":"lessThen5",u="box".concat(n),s="".concat(o," ").concat(i," score score").concat(t),l="".concat(u),p=Object(O.a)({width:100,height:132});return c.a.createElement("div",{className:"box box-".concat(a," ").concat(l," ").concat(this.getAnimatedClassByStatus(a)," xk"),style:p},this.isBoxOpened()?c.a.createElement("div",{className:s},r?null:" "):null)}}]),t}(c.a.Component),a.defaultProps={boxCover:0},r=o))||r)||r,g=4,I=function(){return m.a.range(4)};var R=Object(u.b)(function(e){var t=e.gamePlayerStore;return{gameRecord:t&&t.gameRecord}})(function(e){var t=e.gameRecord;Object(i.useEffect)(function(){t&&!t.play&&setTimeout(function(){return alert(Object(f.a)().GAME_IS_NOT_READY)},300)},[t&&t.id]);var n=Object(O.a)({width:320});return c.a.createElement(d.a,{className:"boxGrid",style:n},I().map(function(e){return c.a.createElement("tr",{key:e},I().map(function(n){return function(e,n){var r=e*g+n,a=t?Object(l.b)(t)[r]:null;return a?c.a.createElement("td",{key:n},c.a.createElement(A,{boxIndex:r,openIndex:a.openIndex,score:a.score,boxCover:m.a.random(1,3)})):c.a.createElement("td",{key:n})}(e,n)}))}))});n.d(t,"a",function(){return P});var P=Object(u.b)(function(e){var t=e.gamePlayerStore;return{gameRecord:t?t.gameRecord:null,playerScores:t?t.playerScores:{},openIndex:t?t.openIndex:-1}})(Object(u.c)(function(e){var t=e.gameRecord,n=e.playerScores,r=e.openIndex,a=void 0===r?-1:r,o=t?Object(l.c)(t):[];return c.a.createElement(c.a.Fragment,null,o.map(function(e){return c.a.createElement(s.d,{key:e.id,imageIndex:e.imageIndex,score:(r=e.pos,t&&n?n[r]:0),pos:e.pos,isActive:a%4===e.index});var r}),c.a.createElement(R,null))}))},52:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),a=n(16),o=n.n(a),i=n(92);function c(e){var t=Object(r.useContext)(i.b).finalRatio;return o.a.reduce(e,function(e,n,r){var a;return n&&o.a.isNumber(n)&&(e[r]=(a=n)?a*t:0),e},e)}},80:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"d",function(){return u}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return l});var r=n(16),a=n.n(r),o=n(310),i=n(128),c={boom:n(311),addScore:n(312),result:n(313)};function u(e){new o.Howl({src:[e]}).play()}function s(e){var t=e.currentUserId,n=e.playerAddrs,r=e.playerScores,o=e.playerAwards,c=void 0===o?[]:o,u=n.indexOf(t),s=function(e){var t=function(){return a.a.random(1,12)};return a.a.reduce(e,function(e,n){var r=e,a=p[n],o=Object.values(r);return(void 0===a||o.indexOf(a)>=0)&&(a=function(e){var n;do{n=t()}while(e.indexOf(n)>=0);return n}(o)),r[n]=a,p[n]=a,r},{})}(n),l=[],m=u-2;m>0?function(){for(var e=m;e<n.length;e++)l.push(n[e]);for(var t=0;t<m;t++)l.push(n[t])}():m<0?function(){for(var e=n.length+m,t=e;t<n.length;t++)l.push(n[t]);for(var r=0;r<e;r++)l.push(n[r])}():l=a.a.cloneDeep(n);var d=function(e,t){var a=l[t],o=n.indexOf(a);return{id:a,pos:e,index:o,isCurrentUser:!1,score:r[o],gain:c[o],imageIndex:s[a]}};return[d(i.a.top,0),d(i.a.right,1),function(e){var t=n.indexOf(e);return{id:e,pos:i.a.bottom,index:t,isCurrentUser:!0,score:r[t],imageIndex:s[e],gain:c[t]}}(t),d(i.a.left,3)]}function l(e){var t=e.scores,n=e.sequencs,r=e.playerAddrs,o=s(e);return t.map(function(e,t){var i=n.indexOf(t);-1===i&&(i=t);var c=r[i%4],u=a.a.find(o,function(e){return e.id===c});return{boxIndex:t,score:e,openIndex:i,heroId:c,heroIndex:u?u.index:-1,heroInfo:u,heroPos:u?u.pos:""}})}var p={}},92:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return c}),n.d(t,"d",function(){return u}),n.d(t,"c",function(){return s});var r,a=n(0),o=n.n(a);!function(e){e.width="width",e.height="height"}(r||(r={}));var i={perfectHeight:0,perfectWidth:0,preferMaxWidth:0,preferMaxHeight:0,winWidth:0,winHeight:0,widthHeightRatio:1,adjustedWidth:0,adjustedHeight:0,finalRatio:1,preferMode:r.width},c=o.a.createContext(i),u=function(){return{winHeight:window.innerHeight,winWidth:window.innerWidth}},s=function(e){var t=e.perfectHeight,n=void 0===t?0:t,a=e.perfectWidth,o=void 0===a?0:a,i=e.preferMaxHeight,c=e.preferMaxWidth,u=e.winWidth,s=void 0===u?0:u,l=(e.winHeight,e.preferMode),p=void 0===l?r.width:l,m=o/n,d=i||n,f=c||o,O=o,E=n,b=o/s,h=1;return p===r.width&&(E=n*(b=(O=f<s?f:s)/o),d=n*b,h=b),{adjustedWidth:O,adjustedHeight:E,widthHeightRatio:m,preferMaxWidth:f,preferMaxHeight:d,finalRatio:h,preferMode:p}}},93:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(32),a=n(0),o=n.n(a),i=n(16),c=n.n(i),u=n(130),s=n(27),l=n(73),p=u.b.div({enter:{y:0,opacity:1,delay:300,transition:{y:{type:"spring",stiffness:1e3,damping:15},default:{duration:300}}},exit:{y:50,opacity:0,transition:{duration:150}}}),m=u.b.div({enter:{opacity:.8},exit:{opacity:0}});var d=Object(s.b)(function(e,t){var n=e.gameUIStore,r=t.onQuit;return{onQuit:c.a.debounce(function(){r&&r(),n.setVisiblePopup(l.b.none)},50)}})(function(e){var t=e.title,n=e.className,i=void 0===n?"":n,c=e.onQuit,s=e.children,l=Object(a.useState)(!1),d=Object(r.a)(l,2),f=d[0],O=d[1];return Object(a.useEffect)(function(){O(!0)},[]),o.a.createElement("div",{className:"popup ".concat(i)},o.a.createElement(u.a,null,f&&[o.a.createElement(m,{key:"popupBackdrop",className:"popupBackdrop",onClick:c,onTouchEnd:c,onKeyDown:function(){},role:"button",tabIndex:0,"aria-label":"click to close popup"}),o.a.createElement(p,{key:"popupWrapper",className:"popupWrapper"},o.a.createElement("div",{className:"popupContainer"},o.a.createElement("div",{className:"popupHeader"},o.a.createElement("button",{onClick:c,onTouchEnd:c,type:"button",className:"popupQuitButton"},"Quit"),o.a.createElement("h2",null,t)),o.a.createElement("div",{className:"popupBody"},o.a.createElement("div",{className:"popupContent"},s))))]))})},94:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0),a=n.n(r);function o(e){var t=e.tHead,n=e.children,r=e.className,o=void 0===r?"":r,i=e.bodyClassName,c=void 0===i?"":i,u=e.style;return a.a.createElement("table",{className:o,style:u},a.a.createElement("thead",null,t),a.a.createElement("tbody",{className:c},n))}}}]);
//# sourceMappingURL=openBox.9dd9ddfe.chunk.js.map